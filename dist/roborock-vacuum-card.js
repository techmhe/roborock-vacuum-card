function e(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}"function"==typeof SuppressedError&&SuppressedError;const t=globalThis,i=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),r=new WeakMap;class s{constructor(e,t,i){if(this._$cssResult$=!0,i!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=r.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&r.set(t,e))}return e}toString(){return this.cssText}}const n=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,o)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1]),e[0]);return new s(i,e,o)},a=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,o))(t)})(e):e,{is:c,defineProperty:l,getOwnPropertyDescriptor:d,getOwnPropertyNames:p,getOwnPropertySymbols:h,getPrototypeOf:u}=Object,m=globalThis,g=m.trustedTypes,_=g?g.emptyScript:"",v=m.reactiveElementPolyfillSupport,f=(e,t)=>e,b={toAttribute(e,t){switch(t){case Boolean:e=e?_:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},y=(e,t)=>!c(e,t),k={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),m.litPropertyMetadata??=new WeakMap;class $ extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=k){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),o=this.getPropertyDescriptor(e,i,t);void 0!==o&&l(this.prototype,e,o)}}static getPropertyDescriptor(e,t,i){const{get:o,set:r}=d(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return o?.call(this)},set(t){const s=o?.call(this);r.call(this,t),this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??k}static _$Ei(){if(this.hasOwnProperty(f("elementProperties")))return;const e=u(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(f("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(f("properties"))){const e=this.properties,t=[...p(e),...h(e)];for(const i of t)this.createProperty(i,e[i])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,i]of t)this.elementProperties.set(e,i)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const i=this._$Eu(e,t);void 0!==i&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(a(e))}else void 0!==e&&t.push(a(e));return t}static _$Eu(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,o)=>{if(i)e.adoptedStyleSheets=o.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const i of o){const o=document.createElement("style"),r=t.litNonce;void 0!==r&&o.setAttribute("nonce",r),o.textContent=i.cssText,e.appendChild(o)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EC(e,t){const i=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,i);if(void 0!==o&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:b).toAttribute(t,i.type);this._$Em=e,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$Em=null}}_$AK(e,t){const i=this.constructor,o=i._$Eh.get(e);if(void 0!==o&&this._$Em!==o){const e=i.getPropertyOptions(o),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:b;this._$Em=o,this[o]=r.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,i){if(void 0!==e){if(i??=this.constructor.getPropertyOptions(e),!(i.hasChanged??y)(this[e],t))return;this.P(e,t,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,i){this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,i]of e)!0!==i.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],i)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}$.elementStyles=[],$.shadowRootOptions={mode:"open"},$[f("elementProperties")]=new Map,$[f("finalized")]=new Map,v?.({ReactiveElement:$}),(m.reactiveElementVersions??=[]).push("2.0.4");const w=globalThis,M=w.trustedTypes,x=M?M.createPolicy("lit-html",{createHTML:e=>e}):void 0,S="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,z="?"+A,C=`<${z}>`,E=document,P=()=>E.createComment(""),R=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,O="[ \t\n\f\r]",B=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,I=/-->/g,T=/>/g,V=RegExp(`>|${O}(?:([^\\s"'>=/]+)(${O}*=${O}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),U=/'/g,N=/"/g,L=/^(?:script|style|textarea|title)$/i,W=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),D=Symbol.for("lit-noChange"),H=Symbol.for("lit-nothing"),F=new WeakMap,Z=E.createTreeWalker(E,129);function q(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==x?x.createHTML(t):t}const K=(e,t)=>{const i=e.length-1,o=[];let r,s=2===t?"<svg>":"",n=B;for(let t=0;t<i;t++){const i=e[t];let a,c,l=-1,d=0;for(;d<i.length&&(n.lastIndex=d,c=n.exec(i),null!==c);)d=n.lastIndex,n===B?"!--"===c[1]?n=I:void 0!==c[1]?n=T:void 0!==c[2]?(L.test(c[2])&&(r=RegExp("</"+c[2],"g")),n=V):void 0!==c[3]&&(n=V):n===V?">"===c[0]?(n=r??B,l=-1):void 0===c[1]?l=-2:(l=n.lastIndex-c[2].length,a=c[1],n=void 0===c[3]?V:'"'===c[3]?N:U):n===N||n===U?n=V:n===I||n===T?n=B:(n=V,r=void 0);const p=n===V&&e[t+1].startsWith("/>")?" ":"";s+=n===B?i+C:l>=0?(o.push(a),i.slice(0,l)+S+i.slice(l)+A+p):i+A+(-2===l?t:p)}return[q(e,s+(e[i]||"<?>")+(2===t?"</svg>":"")),o]};class G{constructor({strings:e,_$litType$:t},i){let o;this.parts=[];let r=0,s=0;const n=e.length-1,a=this.parts,[c,l]=K(e,t);if(this.el=G.createElement(c,i),Z.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(o=Z.nextNode())&&a.length<n;){if(1===o.nodeType){if(o.hasAttributes())for(const e of o.getAttributeNames())if(e.endsWith(S)){const t=l[s++],i=o.getAttribute(e).split(A),n=/([.?@])?(.*)/.exec(t);a.push({type:1,index:r,name:n[2],strings:i,ctor:"."===n[1]?ee:"?"===n[1]?te:"@"===n[1]?ie:Y}),o.removeAttribute(e)}else e.startsWith(A)&&(a.push({type:6,index:r}),o.removeAttribute(e));if(L.test(o.tagName)){const e=o.textContent.split(A),t=e.length-1;if(t>0){o.textContent=M?M.emptyScript:"";for(let i=0;i<t;i++)o.append(e[i],P()),Z.nextNode(),a.push({type:2,index:++r});o.append(e[t],P())}}}else if(8===o.nodeType)if(o.data===z)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=o.data.indexOf(A,e+1));)a.push({type:7,index:r}),e+=A.length-1}r++}}static createElement(e,t){const i=E.createElement("template");return i.innerHTML=e,i}}function Q(e,t,i=e,o){if(t===D)return t;let r=void 0!==o?i._$Co?.[o]:i._$Cl;const s=R(t)?void 0:t._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),void 0===s?r=void 0:(r=new s(e),r._$AT(e,i,o)),void 0!==o?(i._$Co??=[])[o]=r:i._$Cl=r),void 0!==r&&(t=Q(e,r._$AS(e,t.values),r,o)),t}class J{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,o=(e?.creationScope??E).importNode(t,!0);Z.currentNode=o;let r=Z.nextNode(),s=0,n=0,a=i[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new X(r,r.nextSibling,this,e):1===a.type?t=new a.ctor(r,a.name,a.strings,this,e):6===a.type&&(t=new oe(r,this,e)),this._$AV.push(t),a=i[++n]}s!==a?.index&&(r=Z.nextNode(),s++)}return Z.currentNode=E,o}p(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class X{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,o){this.type=2,this._$AH=H,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Q(this,e,t),R(e)?e===H||null==e||""===e?(this._$AH!==H&&this._$AR(),this._$AH=H):e!==this._$AH&&e!==D&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>j(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==H&&R(this._$AH)?this._$AA.nextSibling.data=e:this.T(E.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,o="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=G.createElement(q(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===o)this._$AH.p(t);else{const e=new J(o,this),i=e.u(this.options);e.p(t),this.T(i),this._$AH=e}}_$AC(e){let t=F.get(e.strings);return void 0===t&&F.set(e.strings,t=new G(e)),t}k(e){j(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,o=0;for(const r of e)o===t.length?t.push(i=new X(this.S(P()),this.S(P()),this,this.options)):i=t[o],i._$AI(r),o++;o<t.length&&(this._$AR(i&&i._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class Y{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,o,r){this.type=1,this._$AH=H,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=H}_$AI(e,t=this,i,o){const r=this.strings;let s=!1;if(void 0===r)e=Q(this,e,t,0),s=!R(e)||e!==this._$AH&&e!==D,s&&(this._$AH=e);else{const o=e;let n,a;for(e=r[0],n=0;n<r.length-1;n++)a=Q(this,o[i+n],t,n),a===D&&(a=this._$AH[n]),s||=!R(a)||a!==this._$AH[n],a===H?e=H:e!==H&&(e+=(a??"")+r[n+1]),this._$AH[n]=a}s&&!o&&this.j(e)}j(e){e===H?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ee extends Y{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===H?void 0:e}}class te extends Y{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==H)}}class ie extends Y{constructor(e,t,i,o,r){super(e,t,i,o,r),this.type=5}_$AI(e,t=this){if((e=Q(this,e,t,0)??H)===D)return;const i=this._$AH,o=e===H&&i!==H||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==H&&(i===H||o);o&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class oe{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Q(this,e)}}const re=w.litHtmlPolyfillSupport;re?.(G,X),(w.litHtmlVersions??=[]).push("3.1.2");class se extends ${constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{const o=i?.renderBefore??t;let r=o._$litPart$;if(void 0===r){const e=i?.renderBefore??null;o._$litPart$=r=new X(t.insertBefore(P(),e),e,void 0,i??{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return D}}se._$litElement$=!0,se.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:se});const ne=globalThis.litElementPolyfillSupport;ne?.({LitElement:se}),(globalThis.litElementVersions??=[]).push("4.0.4");const ae=e=>(t,i)=>{void 0!==i?i.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)},ce={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y},le=(e=ce,t,i)=>{const{kind:o,metadata:r}=i;let s=globalThis.litPropertyMetadata.get(r);if(void 0===s&&globalThis.litPropertyMetadata.set(r,s=new Map),s.set(i.name,e),"accessor"===o){const{name:o}=i;return{set(i){const r=t.get.call(this);t.set.call(this,i),this.requestUpdate(o,r,e)},init(t){return void 0!==t&&this.P(o,void 0,e),t}}}if("setter"===o){const{name:o}=i;return function(i){const r=this[o];t.call(this,i),this.requestUpdate(o,r,e)}}throw Error("Unsupported decorator location: "+o)};function de(e){return(t,i)=>"object"==typeof i?le(e,t,i):((e,t,i)=>{const o=t.hasOwnProperty(i);return t.constructor.createProperty(i,o?{...e,wrapped:!0}:e),o?Object.getOwnPropertyDescriptor(t,i):void 0})(e,t,i)}function pe(e){return de({...e,state:!0,attribute:!1})}var he,ue;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(he||(he={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(ue||(ue={}));function me(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var ge=n`:host{--vc-background:var(--ha-card-background,
      var(--card-background-color, white));--vc-spacing:10px;--vc-divider-color:var(--entities-divider-color, var(--divider-color));--vc-primary-text-color:var(--primary-text-color);--vc-secondary-text-color:var(--secondary-text-color);--vc-primary-select-background:color-mix(in srgb, var(--primary-color) 15%, var(--vc-background));--primary-color:#89B3F8;--light-theme-background:#fff;--dark-theme-background:#1d1d1d}@keyframes pulse{from{opacity:1}50%{opacity:.5}to{opacity:1}}ha-card{background-color:var(--vc-background)}ha-card .spacer{flex:1}ha-card .slow-pulse{animation:pulse 4s infinite ease-in-out}ha-card .header{display:flex;padding:var(--vc-spacing)}ha-card .header .tip{margin-right:var(--vc-spacing);cursor:pointer}ha-card .header .tip:last-child{margin-right:0}ha-card .header .modes{display:flex;margin:0 auto;flex-direction:row;justify-content:space-evenly}ha-card .header .battery-badge{height:24px!important;width:24px!important;vertical-align:middle}ha-card .header .icon-title{vertical-align:bottom}ha-card .errors{color:var(--error-color);text-align:center}ha-card .state{padding:var(--vc-spacing);color:var(--vc-secondary-text-color);text-align:center}ha-card .stats{border-top:1px solid var(--vc-divider-color);display:flex;flex-direction:row;justify-content:space-evenly;color:var(--vc-secondary-text-color)}ha-card .stats .stats-value{color:var(--vc-primary-text-color)}ha-card .stats-block{cursor:pointer;padding:var(--vc-spacing) 0;text-align:center;border-right:1px solid var(--vc-divider-color);flex-grow:1}ha-card .stats-block:last-of-type{border-right:0}ha-card .stats-value{font-size:20px;color:var(--vc-primary-text-color)}ha-card .actions{display:flex;border-top:1px solid var(--vc-divider-color)}ha-card .actions paper-button{color:var(--vc-toolbar-text-color);display:flex;align-items:center;margin-right:10px;padding:15px 10px;cursor:pointer}ha-card .actions paper-button ha-icon{margin-right:5px}`;me(ge);var _e={cleaning:"Reinigen",docked:"Angedockt",error:"Fehler",idle:"Bereit",offline:"Offline",paused:"Pausiert",returning:"Kehrt zurück",unavailable:"Nicht verfügbar",unknown:"Unbekannt",starting:"Startet",charger_disconnected:"Ladegerät getrennt",remote_control_active:"Fernbedienung aktiv",returning_home:"Kehrt zur Station zurück",manual_mode:"Manueller Modus",charging:"Lädt",charging_problem:"Ladeproblem",spot_cleaning:"Punktreinigung",shutting_down:"Fährt herunter",updating:"Aktualisierung",docking:"Andocken",going_to_target:"Fährt zum Ziel",zoned_cleaning:"Zonenreinigung",segment_cleaning:"Raumreinigung",emptying_the_bin:"Staubbehälter leeren",washing_the_mop:"Wischmopp waschen",washing_the_mop_2:"Wischmopp waschen 2",going_to_wash_the_mop:"Geht zum Wischmopp waschen",in_call:"Im Anruf",mapping:"Kartierung",egg_attack:"Ei-Angriff",patrol:"Patrouille",attaching_the_mop:"Wischmopp anbringen",detaching_the_mop:"Wischmopp entfernen",charging_complete:"Ladevorgang abgeschlossen",device_offline:"Gerät offline",locked:"Gesperrt",air_drying_stopping:"Lufttrocknung stoppen",robot_status_mopping:"Roboter wischen",clean_mop_cleaning:"Sauberer Mopp reinigen",clean_mop_mopping:"Sauberer Mopp wischen",segment_mopping:"Raumwischen",segment_clean_mop_cleaning:"Raum sauberer Mopp reinigen",segment_clean_mop_mopping:"Raum sauberer Mopp wischen",zoned_mopping:"Zonenwischen",zoned_clean_mop_cleaning:"Zone sauberer Mopp reinigen",zoned_clean_mop_mopping:"Zone sauberer Mopp wischen",back_to_dock_washing_duster:"Zurück zur Station Staub waschen"},ve={charger_disconnected:"Ladegerät getrennt",charging:"Lädt",cleaning:"Reinigen",emptying_the_bin:"Staubbehälter leeren",error:"Fehler",going_to_wash_the_mop:"Geht zum Wischmopp waschen",idle:"Bereit",paused:"Pausiert",returning_home:"Kehrt zur Station zurück",segment_cleaning:"Raumreinigung",unavailable:"Nicht verfügbar",updating:"Aktualisierung",washing_the_mop:"Wischmopp waschen",zoned_cleaning:"Zonenreinigung",unknown:"Unbekannt",starting:"Startet",remote_control_active:"Fernbedienung aktiv",manual_mode:"Manueller Modus",charging_problem:"Ladeproblem",spot_cleaning:"Punktreinigung",shutting_down:"Fährt herunter",docking:"Andocken",going_to_target:"Fährt zum Ziel",washing_the_mop_2:"Wischmopp waschen 2",in_call:"Im Anruf",mapping:"Kartierung",egg_attack:"Ei-Angriff",patrol:"Patrouille",attaching_the_mop:"Wischmopp anbringen",detaching_the_mop:"Wischmopp entfernen",charging_complete:"Ladevorgang abgeschlossen",device_offline:"Gerät offline",locked:"Gesperrt",air_drying_stopping:"Lufttrocknung stoppen",robot_status_mopping:"Roboter wischen",clean_mop_cleaning:"Sauberer Mopp reinigen",clean_mop_mopping:"Sauberer Mopp wischen",segment_mopping:"Raumwischen",segment_clean_mop_cleaning:"Raum sauberer Mopp reinigen",segment_clean_mop_mopping:"Raum sauberer Mopp wischen",zoned_mopping:"Zonenwischen",zoned_clean_mop_cleaning:"Zone sauberer Mopp reinigen",zoned_clean_mop_mopping:"Zone sauberer Mopp wischen",back_to_dock_washing_duster:"Zurück zur Station Staub waschen"},fe={"vac&mop":"Saugen & Wischen",mop:"Wischen",vac:"Saugen"},be={off:"Aus",quiet:"Leise",balanced:"Ausgewogen",turbo:"Turbo",max:"Maximum",max_plus:"Maximum+",custom:"Benutzerdefiniert"},ye={off:"Aus",mild:"Mild",moderate:"Mäßig",intense:"Intensiv",custom:"Benutzerdefiniert"},ke={fast:"Schnell",standard:"Standard",deep:"Gründlich",deep_plus:"Gründlich+",custom:"Benutzerdefiniert"},$e={invalid_config:"Ungültige Konfiguration",missing_entity:"Entität muss angegeben werden!"},we={none:"Kein Fehler",battery_error:"Akkufehler",bumper_stuck:"Stoßstange blockiert",cannot_cross_carpet:"Kann Teppich nicht überqueren",charging_error:"Ladefehler",cliff_sensor_error:"Absturzsensor-Fehler",dock_locator_error:"Ladestation-Lokalisierer-Fehler",fan_error:"Lüfterfehler",filter_blocked:"Filter blockiert",internal_error:"Interner Fehler",invisible_wall_detected:"Unsichtbare Wand erkannt",lidar_blocked:"Lidar blockiert",low_battery:"Schwacher Akku",main_brush_jammed:"Hauptbürste blockiert",no_dustbin:"Kein Staubbehälter",nogo_zone_detected:"Sperrzone erkannt",return_to_dock_fail:"Rückkehr zur Station fehlgeschlagen",robot_on_carpet:"Roboter auf Teppich",robot_tilted:"Roboter geneigt",robot_trapped:"Roboter gefangen",side_brush_error:"Seitenbürsten-Fehler",side_brush_jammed:"Seitenbürste blockiert",vertical_bumper_pressed:"Vertikale Stoßstange gedrückt",vibrarise_jammed:"Vibrarise blockiert",wall_sensor_dirty:"Wandsensor verschmutzt",wheels_jammed:"Räder blockiert",wheels_suspended:"Räder hängen",strainer_error:"Sieb-Fehler",compass_error:"Kompass-Fehler",dock:"Ladestation",optical_flow_sensor_dirt:"Optischer Flusssensor verschmutzt",visual_sensor:"Visueller Sensor",light_touch:"Leichte Berührung",collect_dust_error_3:"Staubsammelfehler 3",collect_dust_error_4:"Staubsammelfehler 4",mopping_roller_1:"Wischrolle 1",mopping_roller_error_2:"Wischrolle Fehler 2",clear_water_box_hoare:"Frischwassertank Verstopfung",dirty_water_box_hoare:"Schmutzwassertank Verstopfung",sink_strainer_hoare:"Spülbeckensieb Verstopfung",clear_water_box_exception:"Frischwassertank Ausnahme",clear_brush_exception:"Bürste reinigen Ausnahme",clear_brush_exception_2:"Bürste reinigen Ausnahme 2",filter_screen_exception:"Filtersieb Ausnahme",mopping_roller_2:"Wischrolle 2",up_water_exception:"Wasseraufnahme Ausnahme",drain_water_exception:"Wasserablass Ausnahme",temperature_protection:"Temperaturschutz",clean_carousel_exception:"Reinigungskarussell Ausnahme",clean_carousel_water_full:"Reinigungskarussell Wasser voll",water_carriage_drop:"Wasserbehälter abgefallen",check_clean_carouse:"Reinigungskarussell prüfen",audio_error:"Audio-Fehler"},Me={cleaning_tank_full_or_blocked:"Reinigungstank voll oder blockiert",dirty_tank_latch_open:"Schmutzwassertank-Verschluss offen",duct_blockage:"Kanalblocke",no_dustbin:"Kein Staubbehälter",waste_water_tank_full:"Schmutzwassertank voll",water_empty:"Wassertank leer"},xe={custom_cleaning:"Benutzerdefinierte Reinigung",doc_error:"Stationsfehler",mop_mode:"Wisch-Intensität",route_mode:"Mopp-Modus",suction_mode:"Saugkraft",vacuum_error:"Staubsauger-Fehler",start:"Start",pause:"Pause",resume:"Fortsetzen",return_to_base:"Zur Station zurückkehren",locate:"Lokalisieren",stop:"Stopp"},Se={status:_e,reach_status:ve,mode:fe,suction_mode:be,mop_mode:ye,route_mode:ke,error:$e,vacuum_error:we,doc_error:Me,common:xe},Ae={cleaning:"Cleaning",docked:"Docked",error:"Error",idle:"Idle",offline:"Offline",paused:"Paused",returning:"Returning",unavailable:"Unavailable"},ze={charger_disconnected:"Charger disconnected",charging:"Charging",cleaning:"Cleaning",emptying_the_bin:"Emptying the bin",error:"Error",going_to_wash_the_mop:"Going to wash the mop",idle:"Idle",paused:"paused",returning_home:"Returning home",segment_cleaning:"Segment cleaning",unavailable:"Unavailable",updating:"Updating",washing_the_mop:"Washing the mop",zoned_cleaning:"Zoned cleaning"},Ce={"vac&mop":"Vac & Mop",mop:"Mop",vac:"Vac"},Ee={off:"Off",quiet:"Quiet",balanced:"Balanced",turbo:"Turbo",max:"Max",max_plus:"Max+"},Pe={off:"Off",mild:"Mild",moderate:"Moderate",intense:"Intense"},Re={fast:"Fast",standard:"Standard",deep:"Deep",deep_plus:"Deep+"},je={invalid_config:"Invalid configuration",missing_entity:"Specifying entity is required!"},Oe={battery_error:"Battery error",bumper_stuck:"Bumper stuck",cannot_cross_carpet:"Cannot cross carpet",charging_error:"Charging error",cliff_sensor_error:"Cliff sensor error",dock_locator_error:"Dock locator error",fan_error:"Fan error",filter_blocked:"Filter blocked",internal_error:"Internal error",invisible_wall_detected:"Invisible wall detected",lidar_blocked:"Lidar blocked",low_battery:"Low battery",main_brush_jammed:"Main brush jammed",no_dustbin:"No dustbin",nogo_zone_detected:"Nogo zone detected",return_to_dock_fail:"Return to dock fail",robot_on_carpet:"Robot on carpet",robot_tilted:"Robot tilted",robot_trapped:"Robot trapped",side_brush_error:"Side brush error",side_brush_jammed:"Side brush jammed",vertical_bumper_pressed:"Vertical bumper pressed",vibrarise_jammed:"Vibrarise jammed",wall_sensor_dirty:"Wall sensor dirty",wheels_jammed:"Wheels jammed",wheels_suspended:"Wheels suspended"},Be={cleaning_tank_full_or_blocked:"Cleaning tank full or blocked",dirty_tank_latch_open:"Dirty tank latch open",duct_blockage:"Duct blockage",no_dustbin:"No dustbin",waste_water_tank_full:"Waste water tank full",water_empty:"Water empty"},Ie={custom_cleaning:"Custom cleaning",doc_error:"Doc error",mop_mode:"Scrub Intensity & Water Flow",route_mode:"Route",suction_mode:"Suction Power",vacuum_error:"Vacuum error",start:"Start",pause:"Pause",resume:"Resume",return_to_base:"Return to base",locate:"Locate",stop:"Stop"},Te={status:Ae,reach_status:ze,mode:Ce,suction_mode:Ee,mop_mode:Pe,route_mode:Re,error:je,vacuum_error:Oe,doc_error:Be,common:Ie},Ve={cleaning:"Sprzątanie",docked:"Zadokowany",error:"Błąd",idle:"Bezczynny",offline:"Offline",paused:"Wstrzymany",returning:"Powracanie",unavailable:"Niedostępny"},Ue={charger_disconnected:"Ładowarka odłączoma",charging:"Ładowanie",cleaning:"Sprzątanie",emptying_the_bin:"Opróżnianie pojemnika na zanieczyszczenia",error:"Błąd",going_to_wash_the_mop:"Przejście do mycia mopa",idle:"Bezczynny",paused:"Wstrzymany",returning_home:"Powrót do stacji",segment_cleaning:"Sprzątanie segmentu",unavailable:"Niedostępny",updating:"Aktualizowanie",washing_the_mop:"Mycie mopa",zoned_cleaning:"Strefowe sprzątanie"},Ne={"vac&mop":"Odk. i Mop.",mop:"Mopuj",vac:"Odkurz"},Le={off:"Off",quiet:"Cichy",balanced:"Zrównoważony",turbo:"Turbo",max:"Max",max_plus:"Max+"},We={off:"Off",mild:"Niski",moderate:"Średni",intense:"Wysoki"},De={fast:"Szybko",standard:"Standard",deep:"Intensywny",deep_plus:"Intensywny+"},He={invalid_config:"Nieprawidłowa konfiguracja",missing_entity:"Specifying entity is required!"},Fe={battery_error:"Błąd baterii",bumper_stuck:"Zderzak zablokowany",cannot_cross_carpet:"Nie można przekroczyć dywanu",charging_error:"Błąd ładowania",cliff_sensor_error:"Błąd czujnika spadku",dock_locator_error:"Błąd lokalizatora stacji",fan_error:"Błąd turbiny",filter_blocked:"Filtr zablokowany",internal_error:"Błąd wewnętrzny",invisible_wall_detected:"Niewidzialna ściana wykryta",lidar_blocked:"Lidar zablokowany",low_battery:"Niski poziom baterii",main_brush_jammed:"Zacięta szczotka główna",no_dustbin:"Brak pojemnika na zanieczyszczenia",nogo_zone_detected:"Wykryto strefę zakazu ruchu",return_to_dock_fail:"Błąd powrotu do stacji",robot_on_carpet:"Robot na dywanie",robot_tilted:"Robot przechylony",robot_trapped:"Robot zablokowany",side_brush_error:"Błąd bocznej szczotki",side_brush_jammed:"Boczna szczotka zablokowana",vertical_bumper_pressed:"Wciśnięty zderzak pionowy",vibrarise_jammed:"Vibrarise zablokowany",wall_sensor_dirty:"Zabrudzony czujnik ścienny",wheels_jammed:"Zablokowane koła",wheels_suspended:"Koła w powietrzu"},Ze={cleaning_tank_full_or_blocked:"Zbiornik czystej wody pełny lub zablokowany",dirty_tank_latch_open:"Zatrzask zbiornika zanieczyszczeń otwarty",duct_blockage:"Zablokowanie kanału",no_dustbin:"Brak worka na zanieczyszczenia",waste_water_tank_full:"Zbiornik z brudną wodą pełen",water_empty:"Zbiornik czystej wody pusty"},qe={custom_cleaning:"Spersonalizowane czyszczenie",doc_error:"Błąd stacji",mop_mode:"Stan wody",route_mode:"Trasa",suction_mode:"Tryb sprzątania",vacuum_error:"Błąd odkurzania",start:"Start",pause:"Wstrzymaj",resume:"Wznów",return_to_base:"Powróć do stacji",locate:"Zlokalizuj",stop:"Zatrzymaj"},Ke={status:Ve,reach_status:Ue,mode:Ne,suction_mode:Le,mop_mode:We,route_mode:De,error:He,vacuum_error:Fe,doc_error:Ze,common:qe};const Ge={de:Object.freeze({__proto__:null,status:_e,reach_status:ve,mode:fe,suction_mode:be,mop_mode:ye,route_mode:ke,error:$e,vacuum_error:we,doc_error:Me,common:xe,default:Se}),en:Object.freeze({__proto__:null,status:Ae,reach_status:ze,mode:Ce,suction_mode:Ee,mop_mode:Pe,route_mode:Re,error:je,vacuum_error:Oe,doc_error:Be,common:Ie,default:Te}),pl:Object.freeze({__proto__:null,status:Ve,reach_status:Ue,mode:Ne,suction_mode:Le,mop_mode:We,route_mode:De,error:He,vacuum_error:Fe,doc_error:Ze,common:qe,default:Ke})},Qe="en";function Je(e,t,i){var o;const[r,s]=e.toLowerCase().split(".");let n=null;try{n=JSON.parse(null!==(o=localStorage.getItem("selectedLanguage"))&&void 0!==o?o:"")}catch(e){n=localStorage.getItem("selectedLanguage")}const a=(n||navigator.language.split("-")[0]||Qe).replace(/['"]+/g,"").replace("-","_");let c;try{c=Ge[a][r][s]}catch(e){c=Ge[Qe][r][s]}if(void 0===c&&(c=s),void 0!==c)return t&&i&&(c=null==c?void 0:c.replace(t,i)),c}var Xe,Ye,et,tt;!function(e){e.VacAndMop="vac&mop",e.Mop="mop",e.Vac="vac"}(Xe||(Xe={})),function(e){e.Off="off",e.Quiet="quiet",e.Balanced="balanced",e.Turbo="turbo",e.Max="max",e.MaxPlus="max_plus"}(Ye||(Ye={})),function(e){e.Off="off",e.Mild="mild",e.Moderate="moderate",e.Intense="intense"}(et||(et={})),function(e){e.Fast="fast",e.Standard="standard",e.Deep="deep",e.DeepPlus="deep_plus"}(tt||(tt={}));class it{get name(){return this.entity_id.replace("vacuum.","")}static isSupportedSuctionMode(e,t){switch(t){case Xe.VacAndMop:return[Ye.Quiet,Ye.Balanced,Ye.Turbo,Ye.Max].includes(e);case Xe.Vac:return[Ye.Quiet,Ye.Balanced,Ye.Turbo,Ye.Max,Ye.MaxPlus].includes(e);case Xe.Mop:return e==Ye.Off}}static isSupportedMopMode(e,t){switch(t){case Xe.VacAndMop:case Xe.Mop:return[et.Mild,et.Moderate,et.Intense].includes(e);case Xe.Vac:return e==et.Off}}static isSupportedRouteMode(e,t){switch(t){case Xe.VacAndMop:case Xe.Vac:return[tt.Fast,tt.Standard].includes(e);case Xe.Mop:return[tt.Fast,tt.Standard,tt.Deep,tt.DeepPlus].includes(e)}}constructor(){}setHass(e){this.hass=e}setEntity(e){this.entity_id=e}getSuctionMode(){return this.getAttributeValue(this.hass.states[this.entity_id],"fan_speed")}getMopMode(){const e=this.getExistingEntityId([`select.${this.name}_mop_intensity`,`select.${this.name}_wischmopp_intensiat`]);return e?this.state(e):et.Off}getRouteMode(){const e=this.getExistingEntityId([`select.${this.name}_mop_mode`,`select.${this.name}_route`]);return e?this.state(e):tt.Standard}callServiceAsync(e){return this.hass.callService("vacuum",e,{entity_id:this.entity_id})}startSegmentsCleaningAsync(e,t){return this.hass.callService("vacuum","send_command",{entity_id:this.entity_id,command:"app_segment_clean",params:[{segments:e,repeat:t}]})}setSuctionModeAsync(e){return this.hass.callService("vacuum","set_fan_speed",{entity_id:this.entity_id,fan_speed:e})}setMopModeAsync(e){const t=this.getExistingEntityId([`select.${this.name}_mop_intensity`,`select.${this.name}_wischmopp_intensiat`]);return t?this.hass.callService("select","select_option",{entity_id:t,option:e}):Promise.resolve()}setRouteModeAsync(e){const t=this.getExistingEntityId([`select.${this.name}_mop_mode`,`select.${this.name}_route`]);return t?this.hass.callService("select","select_option",{entity_id:t,option:e}):Promise.resolve()}state(e){return this.hass.states[e].state}getAttributeValue(e,t){return e.attributes[t]}getExistingEntityId(e){for(let t of e)if(this.hass.states[t])return t}}function ot(e,t,i){const o={quiet:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.112"><path fill="none" stroke="${i}" stroke-width=".529" d="M5.795.8a4.736 4.736 0 1 0 0 9.472 4.736 4.736 0 0 0 4.352-2.874A4.2 4.2 0 0 1 5.61 3.212a4.2 4.2 0 0 1 .742-2.38C6.16.81 5.961.806 5.795.8z"/></svg>`,balanced:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><path d="M55.986 146.233c1.059-.033 3.044.908 3.017 2.947-.024 1.88-1.601 3.05-2.858 3.1" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-49.835 -142.332)"/><path d="M56.6 148.146c-.501.933-2.309 2.181-4.061 1.139-1.616-.961-1.842-2.913-1.256-4.026" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-49.835 -142.332)"/><path d="M54.637 147.601c-.558-.9-.736-3.09 1.043-4.086 1.64-.918 3.443-.138 4.115.925" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-49.835 -142.332)"/></svg>`,turbo:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><path d="M104.403 145.24c.567-.459 1.067-.907 2.232-.951 1.249-.075 3.1.66 3.027 2.745M107.79 147.041c.459.567.907 1.068.951 2.233.075 1.248-.66 3.1-2.745 3.026M105.768 150.438c-.567.458-1.067.906-2.232.95-1.249.075-3.1-.66-3.026-2.744M102.421 148.614c-.458-.567-.906-1.067-.95-2.232-.075-1.249.66-3.1 2.744-3.026" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-99.576 -142.332)"/></svg>`,max:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><path d="M153.113 145.3s.695-2.03 2.828-2.125c.876-.039 1.43.29 1.43.29M156.884 144.916s2.14.147 2.784 2.182c.265.836.09 1.456.09 1.456M158.276 148.682s.413 2.106-1.386 3.254c-.74.472-1.384.464-1.384.464M154.977 151.075s-1.927.944-3.502-.497c-.647-.592-.807-1.216-.807-1.216M152.18 148.833s-1.615-1.412-.896-3.422c.295-.825.809-1.214.809-1.214" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-149.743 -142.332)"/></svg>`,max_plus:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><g transform="translate(-199.626 -142.332)"><path d="M202.912 151.038c.006.58.989 1.032 2.208 1.032 1.22 0 2.208-.44 2.208-1.032M201.616 148.172a.615.615 0 0 0-.104.328c0 .769 1.615 1.392 3.608 1.392s3.608-.623 3.608-1.392a.62.62 0 0 0-.102-.328" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1"/><ellipse cx="205.12" cy="145.325" rx="4.701" ry="1.9" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1"/><path d="M204.964 144.828c1.462-.03 3.075.222 3.087 1.029.01.655-.735 1.052-1.308 1.25" style="fill:none;fill-opacity:1;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1"/></g></svg>`};return o[e]?o[e]:H}function rt(e,t,i){const o={mild:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><path d="M-110.765 136.054a3.324 3.324 0 0 1-6.647 0c0-1.835 1.704-3.847 3.323-4.712 1.659.786 3.324 2.877 3.324 4.712z" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(119.628 -130.73)"/><path d="M-117.329 136.799s.713.779 1.977.779c1.263 0 2.342-.817 2.679-.893.074-.033 1.859-.06 1.859-.06v0M-119.023 134.819s-.152.953-.14 1.659c.012.744.163 1.405.373 1.919M-109.154 134.819s.152.953.14 1.659a5.365 5.365 0 0 1-.374 1.919" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(119.628 -130.73)"/></svg>`,moderate:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><path d="M-137.966 136.055a3.324 3.324 0 0 1-6.647 0c0-1.836 1.705-3.847 3.323-4.713 1.659.787 3.324 2.877 3.324 4.713z" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(146.896 -130.73)"/><path d="M-144.547 135.836s.713.78 1.976.78c1.264 0 2.343-.818 2.68-.894.074-.033 1.859-.059 1.859-.059v0M-146.294 134.813s-.152.954-.14 1.66c.012.743.164 1.404.374 1.918M-136.424 134.813s.152.954.14 1.66a5.365 5.365 0 0 1-.374 1.918M-143.17 140.934s.947.258 1.859.258 1.93-.363 1.93-.363" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(146.896 -130.73)"/></svg>`,intense:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><path d="M55.792 136.055a3.324 3.324 0 0 1-6.648 0c0-1.836 1.705-3.847 3.324-4.713 1.659.787 3.324 2.877 3.324 4.713z" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(-46.818 -130.73)"/><path d="M49.641 134.22s.349.56 1.612.56c1.264 0 2.342-.818 2.68-.893.074-.033 1.165-.06 1.165-.06M48.117 132.983c-.468.854-.69 1.52-.819 2.432M47.415 137.602c.234 1.356 1.079 2.163 1.465 2.584" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(-46.818 -130.73)"/><path d="M48.117 132.983c-.468.854-.69 1.52-.819 2.432M47.415 137.602c.234 1.356 1.079 2.163 1.465 2.584" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="matrix(-1 0 0 1 57.873 -130.73)"/></svg>`};return o[e]?o[e]:H}function st(e,t,i){const o={fast:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-6.01 -117.589)"><rect width="8.996" height="9.525" x="7.069" y="118.383" ry="1.587" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M13.495 126.219v-1.637c0-.425-.651-1.417-1.929-1.427v0c-1.278-.01-1.93-1.001-1.93-1.426v-1.637" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`,standard:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-68.49 -117.589)"><rect width="8.996" height="9.525" x="69.548" y="118.383" ry="1.587" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M76.375 125.905v-4.437c0-.687-.52-1.24-1.165-1.24-.646 0-1.166.553-1.166 1.24v3.373c0 .687-.52 1.24-1.166 1.24-.646 0-1.166-.553-1.166-1.24v-4.437" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`,deep:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-130.888 -117.589)"><rect width="8.996" height="9.525" x="131.946" y="118.383" ry="1.587" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M133.972 125.852v-4.641c0-.581.369-1.05.827-1.05.459 0 .828.469.828 1.05v3.883c0 .581.402 1.05.86 1.05.459 0 .861-.469.861-1.05v-3.841c0-.582.37-1.05.828-1.05.458 0 .827.468.827 1.05v4.641" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`,deep_plus:W`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-9.236 -117.598)"><rect width="8.996" height="9.525" x="10.294" y="118.392" ry="1.587" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M12.034 120.389V125.39c0 .421.3.76.673.76.372 0 .673-.339.673-.76V120.918c0-.421.322-.76.722-.76.4 0 .722.339.722.76V125.39c0 .421.3.76.673.76.372 0 .672-.339.672-.76V120.918c0-.421.3-.76.673-.76.373 0 .673.339.673.76V125.92" style="fill:none;stroke:${i};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`};return o[e]?o[e]:H}var nt=n`.popup-background{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.32);z-index:999}.popup-card{position:relative;color:var(--vc-primary-text-color);border-radius:16px;background-color:var(--card-background-color)}.popup-card .progress{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:9999}.popup-card .header{display:flex;align-items:center;padding:12px;height:var(--header-height)}.popup-card .header ha-icon{font-size:14px}.popup-card .header .text{flex:1;padding:10px 4px;font-size:22px;line-height:28px;font-weight:400}.popup-card .content{display:flex;padding:0 24px 8px 24px}.popup-card .parameters{min-height:380px;min-width:400px;padding:4px 16px 0}.popup-card .parameters .mode-title{display:flex;margin-bottom:4px}.popup-card .parameters .mode-title .value{margin-left:8px;text-transform:capitalize;color:var(--dark-primary-color)}.popup-card .parameters segment-button-group{margin-bottom:24px}.popup-card .areas{font-size:20px;font-weight:300}.popup-card .actions{display:flex;align-items:center;justify-content:center;padding:0 24px 24px 24px}.popup-card .actions .mwc-button{font-size:150%!important}.popup-card .actions .clean-button{display:inline-block;padding:10px 32px;border:none;border-radius:8px;color:var(--primary-text-color);background:var(--vc-primary-select-background);cursor:pointer}.popup-card .actions .clean-button.disabled{opacity:.3;cursor:default}@media (max-width:600px){.popup-card{width:100vw;max-height:100vh;border-radius:0;overflow-y:auto;overflow-x:hidden}.popup-card .header{padding:0 12px}.popup-card .content{flex-direction:column;overflow:auto}.popup-card .parameters{min-height:auto;min-width:0;min-width:initial;width:100%;max-width:100%;padding:0 0 8px 0;margin-bottom:4px;border-bottom:2px solid var(--divider-color)}.popup-card .parameters segment-button-group{margin-bottom:12px}.popup-card .areas{font-size:18px}.popup-card .actions{flex-wrap:wrap;justify-content:center}.popup-card .actions .clean-button{padding:8px 24px;width:100%;max-width:300px}}`;me(nt);var at=n`.multiselect-button{display:flex;line-height:24px;padding:8px 16px;margin-bottom:4px;cursor:pointer;border-radius:8px}.multiselect-button.active{background-color:var(--vc-primary-select-background)}.multiselect-button .text{margin-left:8px}`;me(at);let ct=class extends se{constructor(){super(...arguments),this.selection={}}static get styles(){return at}connectedCallback(){super.connectedCallback(),this.buttons.forEach((e=>this.selection[e.value]=!1))}render(){if(!this.buttons)return H;const e=this.buttons.map((({icon:e,text:t,value:i})=>{const o=this.selection[i]?"active":"";return W`<div class="multiselect-button ${o}" @click="${()=>this._onItemClick(i)}"><ha-icon icon="${e}"></ha-icon><div class="text">${t}</div></div>`}));return W`${e}`}_onItemClick(e){this.selection[e]=!this.selection[e],this.requestUpdate();const t=Object.entries(this.selection).filter((([e,t])=>t)).map((([e])=>e));this.dispatchEvent(new CustomEvent("select",{detail:t}))}};e([de()],ct.prototype,"buttons",void 0),e([pe()],ct.prototype,"selection",void 0),ct=e([ae("multiselect-button-group")],ct);var lt=n`:host{display:flex;box-sizing:border-box;border:1px solid var(--vc-primary-select-background);border-radius:18px;overflow:hidden}.segment-button{display:flex;flex:1;align-items:center;justify-content:center;padding:8px 24px;cursor:pointer}.segment-button.active{background-color:var(--vc-primary-select-background)}.segment-button.disabled{display:none;opacity:.2;cursor:default}.segment-button img{height:24px;width:24px}.segment-button .text{white-space:nowrap}`;me(lt);let dt=class extends se{static get styles(){return lt}render(){if(!this.buttons)return H;const e=this.buttons.map((({icon:e,text:t,value:i,disabled:o})=>{const r=this.active==i?"active":"",s=e?W`${e}`:H,n=t?W`<div class="text">${t}</div>`:H;return W`<div class="segment-button ${r} ${o?"disabled":""}" @click="${()=>this._onItemClick(i,o)}">${s}${n}</div>`}));return W`${e}`}_onItemClick(e,t){this.active===e||t||(this.active=e,this.dispatchEvent(new CustomEvent("select",{detail:e})))}};e([de()],dt.prototype,"buttons",void 0),e([de()],dt.prototype,"active",void 0),dt=e([ae("segment-button-group")],dt);var pt=n`:host{cursor:pointer}.content{display:flex;align-items:center;justify-content:center;height:42px;width:40px;border-radius:8px;background-color:var(--vc-primary-select-background)}`;me(pt);let ht=class extends se{constructor(){super(...arguments),this.color="#000"}static get styles(){return pt}connectedCallback(){super.connectedCallback(),this.active||(this.active="1")}render(){const e=function(e,t,i){const o={1:W`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 42 42"><path fill="${i}" stroke-linecap="round" stroke-miterlimit="2.5" stroke-width=".01" d="M26.869 7.185a.981.981 0 0 0-.592.176l-5.344 3.55c-.34.193-.511.46-.511.801 0 .256.095.49.287.703.213.214.447.32.703.32a.893.893 0 0 0 .545-.19L25.86 9.93v18.71c0 .255.095.479.287.671s.438.287.737.287.544-.095.736-.287.287-.416.287-.672V8.16a.932.932 0 0 0-.223-.639c-.149-.192-.363-.299-.64-.32a.898.898 0 0 0-.176-.016zm-10.285 5.848a.96.96 0 0 0-.705.287l-4.18 4.152-3.947-4.056a.914.914 0 0 0-.705-.32.788.788 0 0 0-.608.288.87.87 0 0 0-.255.64c0 .236.085.46.255.673l3.96 4.068-4.215 4.188c-.192.192-.287.416-.287.672s.095.48.287.671c.192.192.406.288.64.288.256 0 .49-.107.703-.32l4.188-4.147 4.068 4.18c.235.191.459.287.672.287.192 0 .396-.074.61-.223.213-.15.32-.385.32-.705 0-.256-.107-.48-.32-.672l-4.045-4.156 4.205-4.164c.192-.235.287-.469.287-.704 0-.234-.095-.448-.287-.64a.821.821 0 0 0-.64-.287z" aria-label="×1" style="shape-inside:url(#rect1578);white-space:pre" transform="translate(.992 2.608)"/></svg>`,2:W`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 42 42"><g style="shape-inside:url(#rect1578);white-space:pre"><path fill="${i}" stroke-linecap="round" stroke-miterlimit="2.5" stroke-width=".01" d="M27.272 7.033c-.81 0-1.643.17-2.496.511a8.308 8.308 0 0 0-2.272 1.313c-.682.554-1.215 1.16-1.6 1.822a4.47 4.47 0 0 0-.35.514c-.065.15-.098.298-.098.447 0 .235.097.437.289.607.192.15.416.225.672.225.17 0 .319-.043.447-.129.15-.085.288-.234.416-.447a5.01 5.01 0 0 1 1.152-1.535 6.58 6.58 0 0 1 1.729-1.088 5.097 5.097 0 0 1 1.984-.416c1.45 0 2.602.426 3.455 1.28.853.852 1.28 1.984 1.28 3.392 0 .853-.298 1.824-.895 2.912-.576 1.066-1.452 2.24-2.625 3.52l-7.39 8.16c-.171.213-.259.437-.259.671 0 .32.098.566.29.737.213.149.459.222.736.222h12a.865.865 0 0 0 .639-.255.857.857 0 0 0 .289-.672.82.82 0 0 0-.29-.639.82.82 0 0 0-.638-.29h-9.834l5.898-6.622c1.366-1.515 2.388-2.923 3.07-4.225.705-1.322 1.057-2.539 1.057-3.648 0-1.301-.277-2.42-.832-3.36a5.362 5.362 0 0 0-2.305-2.209c-.98-.533-2.154-.798-3.52-.798zm-10.688 6a.96.96 0 0 0-.705.287l-4.18 4.152-3.947-4.057a.914.914 0 0 0-.705-.32.788.788 0 0 0-.608.29.87.87 0 0 0-.255.64c0 .234.085.458.255.672l3.96 4.068-4.215 4.188c-.192.192-.287.415-.287.671s.095.48.287.672c.192.192.406.287.64.287.256 0 .49-.107.703-.32l4.188-4.146 4.068 4.18c.235.191.459.286.672.286.192 0 .396-.073.61-.222.213-.15.32-.385.32-.705 0-.256-.107-.48-.32-.672l-4.045-4.156 4.205-4.164c.192-.235.287-.469.287-.704 0-.234-.095-.448-.287-.64a.821.821 0 0 0-.64-.287z" style="white-space:pre" transform="translate(.992 2.608)"/></g></svg>`,3:W`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 42 42"><g style="shape-inside:url(#rect1578);white-space:pre"><path fill="${i}" stroke-linecap="round" stroke-miterlimit="2.5" stroke-width=".01" d="M6.824 24.584c-.235 0-.448-.096-.64-.288s-.288-.416-.288-.672.096-.48.288-.672l9.696-9.632a.958.958 0 0 1 .704-.288.82.82 0 0 1 .64.288c.192.192.288.405.288.64s-.096.47-.288.704l-9.696 9.6c-.213.213-.448.32-.704.32zm8.96-.288-9.344-9.6a1.061 1.061 0 0 1-.256-.672c0-.256.085-.47.256-.64a.788.788 0 0 1 .608-.288c.277 0 .512.107.704.32l9.312 9.568c.213.192.32.416.32.672 0 .32-.107.555-.32.704s-.416.224-.608.224c-.213 0-.437-.096-.672-.288zm6.024 1.76c.107 0 .213.021.32.064.128.043.277.139.448.288.448.47.981.832 1.6 1.088.619.235 1.323.352 2.112.352 1.045 0 1.995-.235 2.848-.704a5.387 5.387 0 0 0 2.08-1.952c.512-.853.768-1.824.768-2.912 0-1.237-.277-2.23-.832-2.976a4.747 4.747 0 0 0-2.08-1.696 6.048 6.048 0 0 0-2.56-.576c-.235 0-.47.021-.704.064-.213.021-.416.053-.608.096s-.341.064-.448.064c-.277 0-.49-.085-.64-.256a1.112 1.112 0 0 1-.224-.704c0-.15.032-.277.096-.384.064-.128.15-.267.256-.416l6.496-7.072.384.512h-9.696a.98.98 0 0 1-.672-.256c-.17-.192-.256-.416-.256-.672s.085-.47.256-.64a.98.98 0 0 1 .672-.256h10.752c.363 0 .619.117.768.352.15.213.224.427.224.64a.852.852 0 0 1-.096.384c-.064.107-.15.224-.256.352l-6.496 7.072-.704-.416c.064-.064.277-.128.64-.192.384-.085.683-.128.896-.128 1.173 0 2.272.277 3.296.832a6.498 6.498 0 0 1 2.528 2.4c.661 1.024.992 2.293.992 3.808 0 1.493-.352 2.805-1.056 3.936a7.262 7.262 0 0 1-2.848 2.592c-1.195.619-2.517.928-3.968.928-.875 0-1.739-.15-2.592-.448a6.285 6.285 0 0 1-2.24-1.344c-.15-.128-.256-.256-.32-.384s-.096-.256-.096-.384c0-.256.085-.49.256-.704.192-.235.427-.352.704-.352z" style="white-space:pre" transform="translate(.992 2.608)"/></g></svg>`};return o[e]?o[e]:H}(this.active,24,this.color);return W`<div class="content" @click="${this._onItemClick}">${e}</div>`}_onItemClick(){let e=parseInt(this.active,10);e+=1,e>3&&(e=1),this.active=e.toString(),this.dispatchEvent(new CustomEvent("select",{detail:e}))}};e([de()],ht.prototype,"active",void 0),e([de()],ht.prototype,"color",void 0),ht=e([ae("cycles-button")],ht);let ut=class extends se{constructor(){super(...arguments),this.areas=[],this.iconColor="#000",this.popupRequestInProgress=!1,this.activeCleaningMode=Xe.VacAndMop,this.activeSuctionMode=Ye.Turbo,this.activeMopMode=et.Moderate,this.activeRouteMode=tt.Standard,this.activeCycleMode="1",this.activeAreas=[],this.cleaningModes=[],this.suctionModes=[],this.mopModes=[],this.routeModes=[]}static get styles(){return nt}connectedCallback(){super.connectedCallback(),this.cleaningModes=[{text:Je("mode.vac&mop"),value:Xe.VacAndMop},{text:Je("mode.mop"),value:Xe.Mop},{text:Je("mode.vac"),value:Xe.Vac}],this.activeSuctionMode=this.robot.getSuctionMode(),this.activeMopMode=this.robot.getMopMode(),this.activeRouteMode=this.robot.getRouteMode(),this.activeSuctionMode==Ye.Off?this.activeCleaningMode=Xe.Mop:this.activeMopMode==et.Off?this.activeCleaningMode=Xe.Vac:this.activeCleaningMode=Xe.VacAndMop}onCleaningModeChange(e){const t=e.detail;this.activeCleaningMode=t,this.fixModesIfNeeded()}onSuctionModeChange(e){this.activeSuctionMode=e.detail}onMoppingModeChange(e){this.activeMopMode=e.detail}onRouteModeChange(e){this.activeRouteMode=e.detail}onCycleModeChange(e){this.activeCycleMode=e.detail}onAreasChange(e){this.activeAreas=e.detail,this.requestUpdate()}async onRunCleaning(){if(0==this.activeAreas.length)return;this.popupRequestInProgress=!0,this.fixModesIfNeeded(),await this.robot.setSuctionModeAsync(this.activeSuctionMode),await new Promise((e=>setTimeout(e,100))),await this.robot.setMopModeAsync(this.activeMopMode),await new Promise((e=>setTimeout(e,100))),await this.robot.setRouteModeAsync(this.activeRouteMode),await new Promise((e=>setTimeout(e,100)));const e=this.activeAreas.map((e=>parseInt(e,10)));await this.robot.startSegmentsCleaningAsync(e,parseInt(this.activeCycleMode,10)),this.closePopup(),this.popupRequestInProgress=!1}onPopupClose(e){e.stopPropagation(),this.closePopup()}onPopupBackgroundClick(e){const t=e.target;t&&t.classList.contains("popup-background")&&this.closePopup()}closePopup(){this.activeAreas=[],this.dispatchEvent(new CustomEvent("close"))}render(){const e=this.renderSuctionMode(),t=this.renderMoppingMode(),i=this.renderRouteMode(),o=this.renderAreas(),r=this.renderProgress();return W`<div class="popup-background" @click="${this.onPopupBackgroundClick}"><div class="popup-card"><div class="header"><ha-icon-button icon="mdi:close" @click="${this.onPopupClose}"><ha-icon icon="mdi:close"></ha-icon></ha-icon-button><div class="text">${Je("common.custom_cleaning")}</div></div><div class="content"><div class="parameters"><segment-button-group buttons="${this.cleaningModes}" active="${this.activeCleaningMode}" @select="${this.onCleaningModeChange}"></segment-button-group>${e} ${t} ${i}<cycles-button active="${this.activeCycleMode}" color="${this.iconColor}" @select="${this.onCycleModeChange}"></cycles-button></div>${o}</div><div class="actions"><button class="clean-button ${0==this.activeAreas.length?"disabled":""}" @click="${this.onRunCleaning}">CLEAN</button></div>${r}</div></div>`}renderProgress(){return this.popupRequestInProgress?W`<div class="progress"><ha-circular-progress indeterminate="true" size="large"></ha-circular-progress></div>`:H}renderSuctionMode(){if(this.activeCleaningMode==Xe.Mop)return H;this.suctionModes=Object.values(Ye).map((e=>({icon:ot(e,24,this.iconColor),value:e,disabled:!this.isSupportedSuctionMode(e,this.activeCleaningMode)})));const e=Je(`suction_mode.${this.activeSuctionMode}`);return W`<div class="mode-title"><div class="title">${Je("common.suction_mode")}</div><div class="value">${e}</div></div><segment-button-group buttons="${this.suctionModes}" active="${this.activeSuctionMode}" @select="${this.onSuctionModeChange}"></segment-button-group>`}renderMoppingMode(){if(this.activeCleaningMode==Xe.Vac)return H;this.mopModes=Object.values(et).map((e=>({icon:rt(e,24,this.iconColor),value:e,disabled:!this.isSupportedMopMode(e,this.activeCleaningMode)})));const e=Je(`mop_mode.${this.activeMopMode}`);return W`<div class="mode-title"><div class="title">${Je("common.mop_mode")}</div><div class="value">${e}</div></div><segment-button-group buttons="${this.mopModes}" active="${this.activeMopMode}" @select="${this.onMoppingModeChange}"></segment-button-group>`}renderRouteMode(){this.routeModes=Object.values(tt).map((e=>({icon:st(e,24,this.iconColor),value:e,disabled:!this.isSupportedRouteMode(e,this.activeCleaningMode)})));const e=Je(`route_mode.${this.activeRouteMode}`);return W`<div class="mode-title"><div class="title">${Je("common.route_mode")}</div><div class="value">${e}</div></div><segment-button-group buttons="${this.routeModes}" active="${this.activeRouteMode}" @select="${this.onRouteModeChange}"></segment-button-group>`}renderAreas(){const e=this.areas.map((e=>({icon:e.icon,text:e.name,value:e.roborock_area_id.toString()})));return W`<div class="areas"><multiselect-button-group buttons="${e}" @select="${this.onAreasChange}"></multiselect-button-group></div>`}fixModesIfNeeded(){it.isSupportedSuctionMode(this.activeSuctionMode,this.activeCleaningMode)||(this.activeSuctionMode=this.activeCleaningMode==Xe.Mop?Ye.Off:Ye.Turbo),it.isSupportedMopMode(this.activeMopMode,this.activeCleaningMode)||(this.activeMopMode=this.activeCleaningMode==Xe.Vac?et.Off:et.Moderate),it.isSupportedRouteMode(this.activeRouteMode,this.activeCleaningMode)||(this.activeRouteMode=tt.Standard)}isSupportedSuctionMode(e,t){return e!=Ye.Off&&it.isSupportedSuctionMode(e,t)}isSupportedMopMode(e,t){return e!=et.Off&&it.isSupportedMopMode(e,t)}isSupportedRouteMode(e,t){return it.isSupportedRouteMode(e,t)}};e([de()],ut.prototype,"robot",void 0),e([de()],ut.prototype,"areas",void 0),e([de()],ut.prototype,"iconColor",void 0),e([pe()],ut.prototype,"popupRequestInProgress",void 0),e([pe()],ut.prototype,"activeCleaningMode",void 0),e([pe()],ut.prototype,"activeSuctionMode",void 0),e([pe()],ut.prototype,"activeMopMode",void 0),e([pe()],ut.prototype,"activeRouteMode",void 0),e([pe()],ut.prototype,"activeCycleMode",void 0),ut=e([ae("custom-cleaning-popup")],ut);console.info("%c ROBOROCK-VACUUM-CARD %c 1.3.3","color: white; background: black; font-weight: 700;","color: black; background: white; font-weight: 700;");let mt=class extends se{get name(){return this.config.entity.replace("vacuum.","")}get sensor(){const e=this.name;return{cleaning:this._getExistingSensorId([`binary_sensor.${e}_cleaning`,`binary_sensor.${e}_reinigen`]),mopDrying:this._getExistingSensorId([`binary_sensor.${e}_mop_drying`,`binary_sensor.${e}_mopp_trocknen`]),mopDryingRemainingTime:this._getExistingSensorId([`sensor.${e}_mop_drying_remaining_time`,`sensor.${e}_mopp_trocknen_verbleibende_zeit`]),battery:this._getExistingSensorId([`sensor.${e}_battery`,`sensor.${e}_batterie`])}}static get styles(){return ge}constructor(){super(),this.popupActive=!1,this.iconColor="#000",this.robot=new it}setConfig(e){this.config=function(e){var t,i;if(!e)throw new Error(Je("error.invalid_config"));if(!e.entity)throw new Error(Je("error.missing_entity"));const o={[Xe.VacAndMop]:{suction:Ye.Balanced,mop:et.Moderate,route:tt.Standard},[Xe.Mop]:{suction:Ye.Balanced,mop:et.Moderate,route:tt.Deep},[Xe.Vac]:{suction:Ye.Turbo,mop:et.Moderate,route:tt.Standard}};return{entity:e.entity,stats:null!==(t=e.stats)&&void 0!==t?t:{},areas:null!==(i=e.areas)&&void 0!==i?i:[],default_mode:Xe.VacAndMop,default_modes:Object.assign(Object.assign({},e.default_modes),o)}}(e),this.robot.setEntity(this.config.entity)}getCardSize(){return 3}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}onPopupShow(e){e.stopPropagation(),this.popupActive=!0}onPopupClose(e){e.stopPropagation(),this.popupActive=!1}render(){if(!this.hass||!this.config)return H;this.iconColor=getComputedStyle(document.documentElement).getPropertyValue("--state-icon-color").trim(),this.robot.setHass(this.hass);const e=!!this.sensor.cleaning&&"on"==this.state(this.sensor.cleaning),t=this.state(this.config.entity),i=this.renderState(t),o=this.renderErrors(),r=this.renderName(),s=this.renderMode(),n=this.renderMopDrying(),a=this.renderBattery(),c=this.renderStats(e?"cleaning":t),l=this.renderActions(e,t),d=this.renderPopup();return W`<ha-card><div class="header">${r} ${s} ${n} ${a}</div><div class="content" @click="${this.onPopupShow}">${o}<div class="state">${i}</div></div>${c}<div class="actions">${l}</div></ha-card>${d}`}renderState(e){const t=this._getExistingSensorId([`sensor.${this.name}_status`]);if(!t)return Je(`status.${e}`);const i=this.state(t);return e==i?Je(`status.${e}`):Je(`status.${e}`)+". "+Je(`reach_status.${i}`)+"."}renderPopup(){if(!(this.hass&&this.config&&this.config.areas&&this.popupActive))return H;const e=this.getAreas();return W`<custom-cleaning-popup robot="${this.robot}" areas="${e}" iconColor="${this.iconColor}" @close="${this.onPopupClose}"></custom-cleaning-popup>`}renderErrors(){if(!this.hass||!this.config)return H;const e=this._getExistingSensorId([`sensor.${this.name}_vacuum_error`,`sensor.${this.name}_current_error`,`sensor.${this.name}_staubsauger_fehler`]),t=this._getExistingSensorId([`sensor.${this.name}_dock_error`,`sensor.${this.name}_station_fehler`]);let i=!1,o=H;if(e){const t=this.state(e),r=`vacuum_error.${t}`;i="none"!=t,i&&(o=W`<div>${Je("common.vacuum_error")}: ${Je(r)}.</div>`)}let r=!1,s=H;if(t){const e=this.state(t),i=`doc_error.${e}`;r="ok"!=e,r&&(s=W`<div>${Je("common.doc_error")}: ${Je(i)}.</div>`)}return i||r?W`<div class="errors">${o} ${s}</div>`:H}renderStats(e){if(void 0===e)return H;const t=(this.config.stats[e]||this.config.stats.default||[]).map((({entity:e,attribute:t,scale:i,divide_by:o,unit:r,title:s})=>{if(!e&&!t)return H;let n;if(e&&t)n=this.getAttributeValue(this.hass.states[e],t);else if(t)n=this.getAttributeValue(this.hass.states[this.config.entity],t);else{if(!e)return H;n=this.state(e)}if(void 0===n)n="N/A";else{if(null!=i||null!=o){let e=parseFloat(n);null!=o&&o>0&&(e/=o),n=null!=i?e.toFixed(i):e.toString()}}return W`<div class="stats-block" @click="${()=>this.handleMore(e)}"><span class="stats-value">${n}</span> ${r}<div class="stats-subtitle">${s}</div></div>`}));return t.length?W`<div class="stats">${t}</div>`:H}renderActions(e,t){if(e){const e="paused"==t?W`<paper-button @click="${this.handleVacuumAction("start")}"><ha-icon icon="hass:play"></ha-icon>${Je("common.resume")}</paper-button>`:W`<paper-button @click="${this.handleVacuumAction("pause")}"><ha-icon icon="hass:pause"></ha-icon>${Je("common.pause")}</paper-button>`;return W`${e}<paper-button @click="${this.handleVacuumAction("stop")}"><ha-icon icon="hass:stop"></ha-icon>${Je("common.stop")}</paper-button><paper-button @click="${this.handleVacuumAction("return_to_base")}"><ha-icon icon="hass:home-map-marker"></ha-icon>${Je("common.return_to_base")}</paper-button>`}return W`<paper-button @click="${this.handleVacuumAction("start")}"><ha-icon icon="hass:play"></ha-icon>${Je("common.start")}</paper-button><paper-button @click="${this.handleVacuumAction("locate")}"><ha-icon icon="mdi:map-marker"></ha-icon>${Je("common.locate")}</paper-button>`}renderName(){const e=this.hass.states[this.config.entity],t=this.getAttributeValue(e,"friendly_name"),i=this.getAttributeValue(e,"icon");return W`<div class="tip" @click="${()=>this.handleMore(this.config.entity)}"><ha-icon icon="${i}"></ha-icon><span class="icon-title">${t}</span></div>`}renderMode(){const e=[],t=this.robot.getSuctionMode(),i=this.robot.getMopMode(),o=this.robot.getRouteMode();t!=Ye.Off&&e.push(ot(t,24,this.iconColor)),i!=et.Off&&e.push(rt(i,24,this.iconColor)),e.push(st(o,24,this.iconColor));const r=e.map((e=>W`<div class="tip">${e}</div>`));return W`<div class="modes" @click="${this.onPopupShow}">${r}</div>`}renderMopDrying(){if(!this.sensor.mopDrying)return H;const e=this.hass.states[this.sensor.mopDrying];if(!e)return H;if("on"!=e.state)return H;if(!this.sensor.mopDryingRemainingTime)return W`<div class="tip"><ha-icon icon="mdi:heat-wave"></ha-icon><span class="icon-title">Drying</span></div>`;const t=this.hass.states[this.sensor.mopDryingRemainingTime];if(!t)return W`<div class="tip"><ha-icon icon="mdi:heat-wave"></ha-icon><span class="icon-title">Drying</span></div>`;const i=Number(t.state);return W`<div class="tip" @click="${()=>this.handleMore(this.sensor.mopDryingRemainingTime)}"><ha-icon icon="mdi:heat-wave"></ha-icon><span class="icon-title">${function(e){if(0===e)return"0s";const t=Math.floor(e/3600),i=Math.floor(e%3600/60);return(t>0?`${t}h `:"")+(i>0?`${i}min`:"").trim()}(i)}</span></div>`}renderBattery(){if(!this.sensor.battery)return W``;const e=this.hass.states[this.sensor.battery];if(!e)return W``;const t=Number(e.state),i=Number.isFinite(t)?Math.round(t):e.state,o=e.attributes.unit_of_measurement||(Number.isFinite(t)?"%":"");return W`<div class="tip" @click="${()=>this.handleMore(this.sensor.battery)}"><state-badge class="battery-badge" .hass="${this.hass}" .stateObj="${e}"></state-badge><span class="icon-title">${i}${o}</span></div>`}handleVacuumAction(e){return()=>this.robot.callServiceAsync(e)}handleMore(e){!function(e,t,i,o){o=o||{},i=null==i?{}:i;var r=new Event(t,{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});r.detail=i,e.dispatchEvent(r)}(this,"hass-more-info",{entityId:e},{bubbles:!1,composed:!0})}getAreas(){const e=[];if(!this.config.areas)return e;for(let{area_id:t,roborock_area_id:i}of this.config.areas){t=t.replace(/ /g,"_").toLowerCase();const o=this.hass.areas[t];o&&e.push({icon:o.icon,name:o.name,area_id:t,roborock_area_id:i})}return e}_getExistingSensorId(e){for(let t of e)if(this.hass.states[t])return t}getAttributeValue(e,t){return e.attributes[t]}state(e){var t;return null===(t=this.hass.states[e])||void 0===t?void 0:t.state}};e([de({attribute:!1})],mt.prototype,"hass",void 0),e([pe()],mt.prototype,"config",void 0),e([pe()],mt.prototype,"popupActive",void 0),mt=e([ae("roborock-vacuum-card")],mt);export{mt as RoborockVacuumCard};
