function e(e,t,o,i){var r,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,o,n):r(t,o))||n);return s>3&&n&&Object.defineProperty(t,o,n),n}"function"==typeof SuppressedError&&SuppressedError;const t=globalThis,o=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),r=new WeakMap;class s{constructor(e,t,o){if(this._$cssResult$=!0,o!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(o&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=r.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&r.set(t,e))}return e}toString(){return this.cssText}}const n=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new s(o,e,i)},a=o?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,i))(t)})(e):e,{is:c,defineProperty:l,getOwnPropertyDescriptor:d,getOwnPropertyNames:p,getOwnPropertySymbols:h,getPrototypeOf:u}=Object,m=globalThis,g=m.trustedTypes,_=g?g.emptyScript:"",v=m.reactiveElementPolyfillSupport,f=(e,t)=>e,b={toAttribute(e,t){switch(t){case Boolean:e=e?_:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},y=(e,t)=>!c(e,t),k={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),m.litPropertyMetadata??=new WeakMap;class w extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=k){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const o=Symbol(),i=this.getPropertyDescriptor(e,o,t);void 0!==i&&l(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){const{get:i,set:r}=d(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return i?.call(this)},set(t){const s=i?.call(this);r.call(this,t),this.requestUpdate(e,s,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??k}static _$Ei(){if(this.hasOwnProperty(f("elementProperties")))return;const e=u(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(f("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(f("properties"))){const e=this.properties,t=[...p(e),...h(e)];for(const o of t)this.createProperty(o,e[o])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,o]of t)this.elementProperties.set(e,o)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const o=this._$Eu(e,t);void 0!==o&&this._$Eh.set(o,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(a(e))}else void 0!==e&&t.push(a(e));return t}static _$Eu(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const o of t.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,i)=>{if(o)e.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const o of i){const i=document.createElement("style"),r=t.litNonce;void 0!==r&&i.setAttribute("nonce",r),i.textContent=o.cssText,e.appendChild(i)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EC(e,t){const o=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,o);if(void 0!==i&&!0===o.reflect){const r=(void 0!==o.converter?.toAttribute?o.converter:b).toAttribute(t,o.type);this._$Em=e,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null}}_$AK(e,t){const o=this.constructor,i=o._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=o.getPropertyOptions(i),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:b;this._$Em=i,this[i]=r.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,o){if(void 0!==e){if(o??=this.constructor.getPropertyOptions(e),!(o.hasChanged??y)(this[e],t))return;this.P(e,t,o)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,o){this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,o]of e)!0!==o.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],o)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}w.elementStyles=[],w.shadowRootOptions={mode:"open"},w[f("elementProperties")]=new Map,w[f("finalized")]=new Map,v?.({ReactiveElement:w}),(m.reactiveElementVersions??=[]).push("2.0.4");const $=globalThis,M=$.trustedTypes,x=M?M.createPolicy("lit-html",{createHTML:e=>e}):void 0,S="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,C="?"+A,z=`<${C}>`,E=document,P=()=>E.createComment(""),R=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,O="[ \t\n\f\r]",B=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,V=/-->/g,I=/>/g,T=RegExp(`>|${O}(?:([^\\s"'>=/]+)(${O}*=${O}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),N=/'/g,U=/"/g,F=/^(?:script|style|textarea|title)$/i,L=(e=>(t,...o)=>({_$litType$:e,strings:t,values:o}))(1),W=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),H=new WeakMap,Z=E.createTreeWalker(E,129);function q(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==x?x.createHTML(t):t}const K=(e,t)=>{const o=e.length-1,i=[];let r,s=2===t?"<svg>":"",n=B;for(let t=0;t<o;t++){const o=e[t];let a,c,l=-1,d=0;for(;d<o.length&&(n.lastIndex=d,c=n.exec(o),null!==c);)d=n.lastIndex,n===B?"!--"===c[1]?n=V:void 0!==c[1]?n=I:void 0!==c[2]?(F.test(c[2])&&(r=RegExp("</"+c[2],"g")),n=T):void 0!==c[3]&&(n=T):n===T?">"===c[0]?(n=r??B,l=-1):void 0===c[1]?l=-2:(l=n.lastIndex-c[2].length,a=c[1],n=void 0===c[3]?T:'"'===c[3]?U:N):n===U||n===N?n=T:n===V||n===I?n=B:(n=T,r=void 0);const p=n===T&&e[t+1].startsWith("/>")?" ":"";s+=n===B?o+z:l>=0?(i.push(a),o.slice(0,l)+S+o.slice(l)+A+p):o+A+(-2===l?t:p)}return[q(e,s+(e[o]||"<?>")+(2===t?"</svg>":"")),i]};class G{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let r=0,s=0;const n=e.length-1,a=this.parts,[c,l]=K(e,t);if(this.el=G.createElement(c,o),Z.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=Z.nextNode())&&a.length<n;){if(1===i.nodeType){if(i.hasAttributes())for(const e of i.getAttributeNames())if(e.endsWith(S)){const t=l[s++],o=i.getAttribute(e).split(A),n=/([.?@])?(.*)/.exec(t);a.push({type:1,index:r,name:n[2],strings:o,ctor:"."===n[1]?ee:"?"===n[1]?te:"@"===n[1]?oe:X}),i.removeAttribute(e)}else e.startsWith(A)&&(a.push({type:6,index:r}),i.removeAttribute(e));if(F.test(i.tagName)){const e=i.textContent.split(A),t=e.length-1;if(t>0){i.textContent=M?M.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],P()),Z.nextNode(),a.push({type:2,index:++r});i.append(e[t],P())}}}else if(8===i.nodeType)if(i.data===C)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=i.data.indexOf(A,e+1));)a.push({type:7,index:r}),e+=A.length-1}r++}}static createElement(e,t){const o=E.createElement("template");return o.innerHTML=e,o}}function Q(e,t,o=e,i){if(t===W)return t;let r=void 0!==i?o._$Co?.[i]:o._$Cl;const s=R(t)?void 0:t._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),void 0===s?r=void 0:(r=new s(e),r._$AT(e,o,i)),void 0!==i?(o._$Co??=[])[i]=r:o._$Cl=r),void 0!==r&&(t=Q(e,r._$AS(e,t.values),r,i)),t}class J{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:o}=this._$AD,i=(e?.creationScope??E).importNode(t,!0);Z.currentNode=i;let r=Z.nextNode(),s=0,n=0,a=o[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new Y(r,r.nextSibling,this,e):1===a.type?t=new a.ctor(r,a.name,a.strings,this,e):6===a.type&&(t=new ie(r,this,e)),this._$AV.push(t),a=o[++n]}s!==a?.index&&(r=Z.nextNode(),s++)}return Z.currentNode=E,i}p(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class Y{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,o,i){this.type=2,this._$AH=D,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Q(this,e,t),R(e)?e===D||null==e||""===e?(this._$AH!==D&&this._$AR(),this._$AH=D):e!==this._$AH&&e!==W&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>j(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==D&&R(this._$AH)?this._$AA.nextSibling.data=e:this.T(E.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:o}=e,i="number"==typeof o?this._$AC(e):(void 0===o.el&&(o.el=G.createElement(q(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===i)this._$AH.p(t);else{const e=new J(i,this),o=e.u(this.options);e.p(t),this.T(o),this._$AH=e}}_$AC(e){let t=H.get(e.strings);return void 0===t&&H.set(e.strings,t=new G(e)),t}k(e){j(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const r of e)i===t.length?t.push(o=new Y(this.S(P()),this.S(P()),this,this.options)):o=t[i],o._$AI(r),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class X{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,o,i,r){this.type=1,this._$AH=D,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=r,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=D}_$AI(e,t=this,o,i){const r=this.strings;let s=!1;if(void 0===r)e=Q(this,e,t,0),s=!R(e)||e!==this._$AH&&e!==W,s&&(this._$AH=e);else{const i=e;let n,a;for(e=r[0],n=0;n<r.length-1;n++)a=Q(this,i[o+n],t,n),a===W&&(a=this._$AH[n]),s||=!R(a)||a!==this._$AH[n],a===D?e=D:e!==D&&(e+=(a??"")+r[n+1]),this._$AH[n]=a}s&&!i&&this.j(e)}j(e){e===D?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ee extends X{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===D?void 0:e}}class te extends X{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==D)}}class oe extends X{constructor(e,t,o,i,r){super(e,t,o,i,r),this.type=5}_$AI(e,t=this){if((e=Q(this,e,t,0)??D)===W)return;const o=this._$AH,i=e===D&&o!==D||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,r=e!==D&&(o===D||i);i&&this.element.removeEventListener(this.name,this,o),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class ie{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){Q(this,e)}}const re=$.litHtmlPolyfillSupport;re?.(G,Y),($.litHtmlVersions??=[]).push("3.1.2");class se extends w{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,o)=>{const i=o?.renderBefore??t;let r=i._$litPart$;if(void 0===r){const e=o?.renderBefore??null;i._$litPart$=r=new Y(t.insertBefore(P(),e),e,void 0,o??{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return W}}se._$litElement$=!0,se.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:se});const ne=globalThis.litElementPolyfillSupport;ne?.({LitElement:se}),(globalThis.litElementVersions??=[]).push("4.0.4");const ae=e=>(t,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)},ce={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y},le=(e=ce,t,o)=>{const{kind:i,metadata:r}=o;let s=globalThis.litPropertyMetadata.get(r);if(void 0===s&&globalThis.litPropertyMetadata.set(r,s=new Map),s.set(o.name,e),"accessor"===i){const{name:i}=o;return{set(o){const r=t.get.call(this);t.set.call(this,o),this.requestUpdate(i,r,e)},init(t){return void 0!==t&&this.P(i,void 0,e),t}}}if("setter"===i){const{name:i}=o;return function(o){const r=this[i];t.call(this,o),this.requestUpdate(i,r,e)}}throw Error("Unsupported decorator location: "+i)};function de(e){return(t,o)=>"object"==typeof o?le(e,t,o):((e,t,o)=>{const i=t.hasOwnProperty(o);return t.constructor.createProperty(o,i?{...e,wrapped:!0}:e),i?Object.getOwnPropertyDescriptor(t,o):void 0})(e,t,o)}function pe(e){return de({...e,state:!0,attribute:!1})}var he,ue;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(he||(he={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(ue||(ue={}));function me(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===o&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var ge=n`:host{--vc-background:var(--ha-card-background,
      var(--card-background-color, white));--vc-spacing:10px;--vc-divider-color:var(--entities-divider-color, var(--divider-color));--vc-primary-text-color:var(--primary-text-color);--vc-secondary-text-color:var(--secondary-text-color);--vc-primary-select-background:color-mix(in srgb, var(--primary-color) 15%, var(--vc-background));--primary-color:#89B3F8;--light-theme-background:#fff;--dark-theme-background:#1d1d1d}@keyframes pulse{from{opacity:1}50%{opacity:.5}to{opacity:1}}ha-card{background-color:var(--vc-background)}ha-card .spacer{flex:1}ha-card .slow-pulse{animation:pulse 4s infinite ease-in-out}ha-card .header{display:flex;padding:var(--vc-spacing)}ha-card .header .tip{margin-right:var(--vc-spacing);cursor:pointer}ha-card .header .tip:last-child{margin-right:0}ha-card .header .modes{display:flex;margin:0 auto;flex-direction:row;justify-content:space-evenly}ha-card .header .battery-badge{height:24px!important;width:24px!important;vertical-align:middle}ha-card .header .icon-title{vertical-align:bottom}ha-card .errors{color:var(--error-color);text-align:center}ha-card .state{padding:var(--vc-spacing);color:var(--vc-secondary-text-color);text-align:center}ha-card .stats{border-top:1px solid var(--vc-divider-color);display:flex;flex-direction:row;justify-content:space-evenly;color:var(--vc-secondary-text-color)}ha-card .stats .stats-value{color:var(--vc-primary-text-color)}ha-card .stats-block{cursor:pointer;padding:var(--vc-spacing) 0;text-align:center;border-right:1px solid var(--vc-divider-color);flex-grow:1}ha-card .stats-block:last-of-type{border-right:0}ha-card .stats-value{font-size:20px;color:var(--vc-primary-text-color)}ha-card .actions{display:flex;border-top:1px solid var(--vc-divider-color);position:relative}ha-card .actions paper-button{color:var(--vc-toolbar-text-color);display:flex;align-items:center;margin-right:10px;padding:15px 10px;cursor:pointer}ha-card .actions paper-button ha-icon{margin-right:5px}ha-card .actions .map-switcher{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;align-items:center;padding:8px 12px;background:var(--vc-primary-select-background);border-radius:16px;cursor:pointer;font-size:.85em;color:var(--vc-primary-text-color);border:1px solid var(--divider-color)}ha-card .actions .map-switcher ha-icon{margin-right:6px;width:16px;height:16px}ha-card .actions .map-switcher:hover{background:color-mix(in srgb,var(--primary-color) 25%,var(--vc-background))}`;me(ge);var _e={cleaning:"Reinigen",docked:"Angedockt",error:"Fehler",idle:"Bereit",offline:"Offline",paused:"Pausiert",returning:"Kehrt zurück",unavailable:"Nicht verfügbar",unknown:"Unbekannt",starting:"Startet",charger_disconnected:"Ladegerät getrennt",remote_control_active:"Fernbedienung aktiv",returning_home:"Kehrt zur Station zurück",manual_mode:"Manueller Modus",charging:"Lädt",charging_problem:"Ladeproblem",spot_cleaning:"Punktreinigung",shutting_down:"Fährt herunter",updating:"Aktualisierung",docking:"Andocken",going_to_target:"Fährt zum Ziel",zoned_cleaning:"Zonenreinigung",segment_cleaning:"Raumreinigung",emptying_the_bin:"Staubbehälter leeren",washing_the_mop:"Wischmopp waschen",washing_the_mop_2:"Wischmopp waschen 2",going_to_wash_the_mop:"Geht zum Wischmopp waschen",in_call:"Im Anruf",mapping:"Kartierung",egg_attack:"Ei-Angriff",patrol:"Patrouille",attaching_the_mop:"Wischmopp anbringen",detaching_the_mop:"Wischmopp entfernen",charging_complete:"Ladevorgang abgeschlossen",device_offline:"Gerät offline",locked:"Gesperrt",air_drying_stopping:"Lufttrocknung stoppen",robot_status_mopping:"Roboter wischen",clean_mop_cleaning:"Sauberer Mopp reinigen",clean_mop_mopping:"Sauberer Mopp wischen",segment_mopping:"Raumwischen",segment_clean_mop_cleaning:"Raum sauberer Mopp reinigen",segment_clean_mop_mopping:"Raum sauberer Mopp wischen",zoned_mopping:"Zonenwischen",zoned_clean_mop_cleaning:"Zone sauberer Mopp reinigen",zoned_clean_mop_mopping:"Zone sauberer Mopp wischen",back_to_dock_washing_duster:"Zurück zur Station Staub waschen"},ve={charger_disconnected:"Ladegerät getrennt",charging:"Lädt",cleaning:"Reinigen",emptying_the_bin:"Staubbehälter leeren",error:"Fehler",going_to_wash_the_mop:"Geht zum Wischmopp waschen",idle:"Bereit",paused:"Pausiert",returning_home:"Kehrt zur Station zurück",segment_cleaning:"Raumreinigung",unavailable:"Nicht verfügbar",updating:"Aktualisierung",washing_the_mop:"Wischmopp waschen",zoned_cleaning:"Zonenreinigung",unknown:"Unbekannt",starting:"Startet",remote_control_active:"Fernbedienung aktiv",manual_mode:"Manueller Modus",charging_problem:"Ladeproblem",spot_cleaning:"Punktreinigung",shutting_down:"Fährt herunter",docking:"Andocken",going_to_target:"Fährt zum Ziel",washing_the_mop_2:"Wischmopp waschen 2",in_call:"Im Anruf",mapping:"Kartierung",egg_attack:"Ei-Angriff",patrol:"Patrouille",attaching_the_mop:"Wischmopp anbringen",detaching_the_mop:"Wischmopp entfernen",charging_complete:"Ladevorgang abgeschlossen",device_offline:"Gerät offline",locked:"Gesperrt",air_drying_stopping:"Lufttrocknung stoppen",robot_status_mopping:"Roboter wischen",clean_mop_cleaning:"Sauberer Mopp reinigen",clean_mop_mopping:"Sauberer Mopp wischen",segment_mopping:"Raumwischen",segment_clean_mop_cleaning:"Raum sauberer Mopp reinigen",segment_clean_mop_mopping:"Raum sauberer Mopp wischen",zoned_mopping:"Zonenwischen",zoned_clean_mop_cleaning:"Zone sauberer Mopp reinigen",zoned_clean_mop_mopping:"Zone sauberer Mopp wischen",back_to_dock_washing_duster:"Zurück zur Station Staub waschen"},fe={"vac&mop":"Saugen & Wischen",mop:"Wischen",vac:"Saugen"},be={off:"Aus",quiet:"Leise",balanced:"Ausgewogen",turbo:"Turbo",max:"Maximum",max_plus:"Maximum+",custom:"Benutzerdefiniert"},ye={off:"Aus",mild:"Mild",moderate:"Mäßig",intense:"Intensiv",custom:"Benutzerdefiniert"},ke={fast:"Schnell",standard:"Standard",deep:"Gründlich",deep_plus:"Gründlich+",custom:"Benutzerdefiniert"},we={invalid_config:"Ungültige Konfiguration",missing_entity:"Entität muss angegeben werden!"},$e={none:"Kein Fehler",battery_error:"Akkufehler",bumper_stuck:"Stoßstange blockiert",cannot_cross_carpet:"Kann Teppich nicht überqueren",charging_error:"Ladefehler",cliff_sensor_error:"Absturzsensor-Fehler",dock_locator_error:"Ladestation-Lokalisierer-Fehler",fan_error:"Lüfterfehler",filter_blocked:"Filter blockiert",internal_error:"Interner Fehler",invisible_wall_detected:"Unsichtbare Wand erkannt",lidar_blocked:"Lidar blockiert",low_battery:"Schwacher Akku",main_brush_jammed:"Hauptbürste blockiert",no_dustbin:"Kein Staubbehälter",nogo_zone_detected:"Sperrzone erkannt",return_to_dock_fail:"Rückkehr zur Station fehlgeschlagen",robot_on_carpet:"Roboter auf Teppich",robot_tilted:"Roboter geneigt",robot_trapped:"Roboter gefangen",side_brush_error:"Seitenbürsten-Fehler",side_brush_jammed:"Seitenbürste blockiert",vertical_bumper_pressed:"Vertikale Stoßstange gedrückt",vibrarise_jammed:"Vibrarise blockiert",wall_sensor_dirty:"Wandsensor verschmutzt",wheels_jammed:"Räder blockiert",wheels_suspended:"Räder hängen",strainer_error:"Sieb-Fehler",compass_error:"Kompass-Fehler",dock:"Ladestation",optical_flow_sensor_dirt:"Optischer Flusssensor verschmutzt",visual_sensor:"Visueller Sensor",light_touch:"Leichte Berührung",collect_dust_error_3:"Staubsammelfehler 3",collect_dust_error_4:"Staubsammelfehler 4",mopping_roller_1:"Wischrolle 1",mopping_roller_error_2:"Wischrolle Fehler 2",clear_water_box_hoare:"Frischwassertank Verstopfung",dirty_water_box_hoare:"Schmutzwassertank Verstopfung",sink_strainer_hoare:"Spülbeckensieb Verstopfung",clear_water_box_exception:"Frischwassertank Ausnahme",clear_brush_exception:"Bürste reinigen Ausnahme",clear_brush_exception_2:"Bürste reinigen Ausnahme 2",filter_screen_exception:"Filtersieb Ausnahme",mopping_roller_2:"Wischrolle 2",up_water_exception:"Wasseraufnahme Ausnahme",drain_water_exception:"Wasserablass Ausnahme",temperature_protection:"Temperaturschutz",clean_carousel_exception:"Reinigungskarussell Ausnahme",clean_carousel_water_full:"Reinigungskarussell Wasser voll",water_carriage_drop:"Wasserbehälter abgefallen",check_clean_carouse:"Reinigungskarussell prüfen",audio_error:"Audio-Fehler"},Me={cleaning_tank_full_or_blocked:"Reinigungstank voll oder blockiert",dirty_tank_latch_open:"Schmutzwassertank-Verschluss offen",duct_blockage:"Kanalblocke",no_dustbin:"Kein Staubbehälter",waste_water_tank_full:"Schmutzwassertank voll",water_empty:"Wassertank leer"},xe={custom_cleaning:"Benutzerdefinierte Reinigung",doc_error:"Stationsfehler",mop_mode:"Wisch-Intensität",route_mode:"Mopp-Modus",suction_mode:"Saugkraft",vacuum_error:"Staubsauger-Fehler",start:"Start",pause:"Pause",resume:"Fortsetzen",return_to_base:"Zur Station zurückkehren",locate:"Lokalisieren",stop:"Stopp"},Se={status:_e,reach_status:ve,mode:fe,suction_mode:be,mop_mode:ye,route_mode:ke,error:we,vacuum_error:$e,doc_error:Me,common:xe},Ae={cleaning:"Cleaning",docked:"Docked",error:"Error",idle:"Idle",offline:"Offline",paused:"Paused",returning:"Returning",unavailable:"Unavailable"},Ce={charger_disconnected:"Charger disconnected",charging:"Charging",cleaning:"Cleaning",emptying_the_bin:"Emptying the bin",error:"Error",going_to_wash_the_mop:"Going to wash the mop",idle:"Idle",paused:"paused",returning_home:"Returning home",segment_cleaning:"Segment cleaning",unavailable:"Unavailable",updating:"Updating",washing_the_mop:"Washing the mop",zoned_cleaning:"Zoned cleaning"},ze={"vac&mop":"Vac & Mop",mop:"Mop",vac:"Vac"},Ee={off:"Off",quiet:"Quiet",balanced:"Balanced",turbo:"Turbo",max:"Max",max_plus:"Max+"},Pe={off:"Off",mild:"Mild",moderate:"Moderate",intense:"Intense"},Re={fast:"Fast",standard:"Standard",deep:"Deep",deep_plus:"Deep+"},je={invalid_config:"Invalid configuration",missing_entity:"Specifying entity is required!"},Oe={battery_error:"Battery error",bumper_stuck:"Bumper stuck",cannot_cross_carpet:"Cannot cross carpet",charging_error:"Charging error",cliff_sensor_error:"Cliff sensor error",dock_locator_error:"Dock locator error",fan_error:"Fan error",filter_blocked:"Filter blocked",internal_error:"Internal error",invisible_wall_detected:"Invisible wall detected",lidar_blocked:"Lidar blocked",low_battery:"Low battery",main_brush_jammed:"Main brush jammed",no_dustbin:"No dustbin",nogo_zone_detected:"Nogo zone detected",return_to_dock_fail:"Return to dock fail",robot_on_carpet:"Robot on carpet",robot_tilted:"Robot tilted",robot_trapped:"Robot trapped",side_brush_error:"Side brush error",side_brush_jammed:"Side brush jammed",vertical_bumper_pressed:"Vertical bumper pressed",vibrarise_jammed:"Vibrarise jammed",wall_sensor_dirty:"Wall sensor dirty",wheels_jammed:"Wheels jammed",wheels_suspended:"Wheels suspended"},Be={cleaning_tank_full_or_blocked:"Cleaning tank full or blocked",dirty_tank_latch_open:"Dirty tank latch open",duct_blockage:"Duct blockage",no_dustbin:"No dustbin",waste_water_tank_full:"Waste water tank full",water_empty:"Water empty"},Ve={custom_cleaning:"Custom cleaning",doc_error:"Doc error",mop_mode:"Scrub Intensity & Water Flow",route_mode:"Route",suction_mode:"Suction Power",vacuum_error:"Vacuum error",start:"Start",pause:"Pause",resume:"Resume",return_to_base:"Return to base",locate:"Locate",stop:"Stop"},Ie={status:Ae,reach_status:Ce,mode:ze,suction_mode:Ee,mop_mode:Pe,route_mode:Re,error:je,vacuum_error:Oe,doc_error:Be,common:Ve},Te={cleaning:"Sprzątanie",docked:"Zadokowany",error:"Błąd",idle:"Bezczynny",offline:"Offline",paused:"Wstrzymany",returning:"Powracanie",unavailable:"Niedostępny"},Ne={charger_disconnected:"Ładowarka odłączoma",charging:"Ładowanie",cleaning:"Sprzątanie",emptying_the_bin:"Opróżnianie pojemnika na zanieczyszczenia",error:"Błąd",going_to_wash_the_mop:"Przejście do mycia mopa",idle:"Bezczynny",paused:"Wstrzymany",returning_home:"Powrót do stacji",segment_cleaning:"Sprzątanie segmentu",unavailable:"Niedostępny",updating:"Aktualizowanie",washing_the_mop:"Mycie mopa",zoned_cleaning:"Strefowe sprzątanie"},Ue={"vac&mop":"Odk. i Mop.",mop:"Mopuj",vac:"Odkurz"},Fe={off:"Off",quiet:"Cichy",balanced:"Zrównoważony",turbo:"Turbo",max:"Max",max_plus:"Max+"},Le={off:"Off",mild:"Niski",moderate:"Średni",intense:"Wysoki"},We={fast:"Szybko",standard:"Standard",deep:"Intensywny",deep_plus:"Intensywny+"},De={invalid_config:"Nieprawidłowa konfiguracja",missing_entity:"Specifying entity is required!"},He={battery_error:"Błąd baterii",bumper_stuck:"Zderzak zablokowany",cannot_cross_carpet:"Nie można przekroczyć dywanu",charging_error:"Błąd ładowania",cliff_sensor_error:"Błąd czujnika spadku",dock_locator_error:"Błąd lokalizatora stacji",fan_error:"Błąd turbiny",filter_blocked:"Filtr zablokowany",internal_error:"Błąd wewnętrzny",invisible_wall_detected:"Niewidzialna ściana wykryta",lidar_blocked:"Lidar zablokowany",low_battery:"Niski poziom baterii",main_brush_jammed:"Zacięta szczotka główna",no_dustbin:"Brak pojemnika na zanieczyszczenia",nogo_zone_detected:"Wykryto strefę zakazu ruchu",return_to_dock_fail:"Błąd powrotu do stacji",robot_on_carpet:"Robot na dywanie",robot_tilted:"Robot przechylony",robot_trapped:"Robot zablokowany",side_brush_error:"Błąd bocznej szczotki",side_brush_jammed:"Boczna szczotka zablokowana",vertical_bumper_pressed:"Wciśnięty zderzak pionowy",vibrarise_jammed:"Vibrarise zablokowany",wall_sensor_dirty:"Zabrudzony czujnik ścienny",wheels_jammed:"Zablokowane koła",wheels_suspended:"Koła w powietrzu"},Ze={cleaning_tank_full_or_blocked:"Zbiornik czystej wody pełny lub zablokowany",dirty_tank_latch_open:"Zatrzask zbiornika zanieczyszczeń otwarty",duct_blockage:"Zablokowanie kanału",no_dustbin:"Brak worka na zanieczyszczenia",waste_water_tank_full:"Zbiornik z brudną wodą pełen",water_empty:"Zbiornik czystej wody pusty"},qe={custom_cleaning:"Spersonalizowane czyszczenie",doc_error:"Błąd stacji",mop_mode:"Stan wody",route_mode:"Trasa",suction_mode:"Tryb sprzątania",vacuum_error:"Błąd odkurzania",start:"Start",pause:"Wstrzymaj",resume:"Wznów",return_to_base:"Powróć do stacji",locate:"Zlokalizuj",stop:"Zatrzymaj"},Ke={status:Te,reach_status:Ne,mode:Ue,suction_mode:Fe,mop_mode:Le,route_mode:We,error:De,vacuum_error:He,doc_error:Ze,common:qe};const Ge={de:Object.freeze({__proto__:null,status:_e,reach_status:ve,mode:fe,suction_mode:be,mop_mode:ye,route_mode:ke,error:we,vacuum_error:$e,doc_error:Me,common:xe,default:Se}),en:Object.freeze({__proto__:null,status:Ae,reach_status:Ce,mode:ze,suction_mode:Ee,mop_mode:Pe,route_mode:Re,error:je,vacuum_error:Oe,doc_error:Be,common:Ve,default:Ie}),pl:Object.freeze({__proto__:null,status:Te,reach_status:Ne,mode:Ue,suction_mode:Fe,mop_mode:Le,route_mode:We,error:De,vacuum_error:He,doc_error:Ze,common:qe,default:Ke})},Qe="en";function Je(e,t,o){var i;const[r,s]=e.toLowerCase().split(".");let n=null;try{n=JSON.parse(null!==(i=localStorage.getItem("selectedLanguage"))&&void 0!==i?i:"")}catch(e){n=localStorage.getItem("selectedLanguage")}const a=(n||navigator.language.split("-")[0]||Qe).replace(/['"]+/g,"").replace("-","_");let c;try{c=Ge[a][r][s]}catch(e){c=Ge[Qe][r][s]}if(void 0===c&&(c=s),void 0!==c)return t&&o&&(c=null==c?void 0:c.replace(t,o)),c}var Ye,Xe,et,tt;!function(e){e.VacAndMop="vac&mop",e.Mop="mop",e.Vac="vac"}(Ye||(Ye={})),function(e){e.Off="off",e.Quiet="quiet",e.Balanced="balanced",e.Turbo="turbo",e.Max="max",e.MaxPlus="max_plus"}(Xe||(Xe={})),function(e){e.Off="off",e.Mild="mild",e.Moderate="moderate",e.Intense="intense"}(et||(et={})),function(e){e.Fast="fast",e.Standard="standard",e.Deep="deep",e.DeepPlus="deep_plus"}(tt||(tt={}));class ot{get name(){return this.entity_id.replace("vacuum.","")}static isSupportedSuctionMode(e,t){switch(t){case Ye.VacAndMop:return[Xe.Quiet,Xe.Balanced,Xe.Turbo,Xe.Max].includes(e);case Ye.Vac:return[Xe.Quiet,Xe.Balanced,Xe.Turbo,Xe.Max,Xe.MaxPlus].includes(e);case Ye.Mop:return e==Xe.Off}}static isSupportedMopMode(e,t){switch(t){case Ye.VacAndMop:case Ye.Mop:return[et.Mild,et.Moderate,et.Intense].includes(e);case Ye.Vac:return e==et.Off}}static isSupportedRouteMode(e,t){switch(t){case Ye.VacAndMop:case Ye.Vac:return[tt.Fast,tt.Standard].includes(e);case Ye.Mop:return[tt.Fast,tt.Standard,tt.Deep,tt.DeepPlus].includes(e)}}constructor(){}setHass(e){this.hass=e}setEntity(e){this.entity_id=e}getSuctionMode(){return this.getAttributeValue(this.hass.states[this.entity_id],"fan_speed")}getMopMode(){const e=this.getExistingEntityId([`select.${this.name}_mop_intensity`,`select.${this.name}_wischmopp_intensiat`]);return e?this.state(e):et.Off}getRouteMode(){const e=this.getExistingEntityId([`select.${this.name}_mop_mode`,`select.${this.name}_route`]);return e?this.state(e):tt.Standard}callServiceAsync(e){return this.hass.callService("vacuum",e,{entity_id:this.entity_id})}startSegmentsCleaningAsync(e,t){return this.hass.callService("vacuum","send_command",{entity_id:this.entity_id,command:"app_segment_clean",params:[{segments:e,repeat:t}]})}setSuctionModeAsync(e){return this.hass.callService("vacuum","set_fan_speed",{entity_id:this.entity_id,fan_speed:e})}setMopModeAsync(e){const t=this.getExistingEntityId([`select.${this.name}_mop_intensity`,`select.${this.name}_wischmopp_intensiat`]);return t?this.hass.callService("select","select_option",{entity_id:t,option:e}):Promise.resolve()}setRouteModeAsync(e){const t=this.getExistingEntityId([`select.${this.name}_mop_mode`,`select.${this.name}_route`]);return t?this.hass.callService("select","select_option",{entity_id:t,option:e}):Promise.resolve()}loadMultiMapAsync(e){return this.hass.callService("vacuum","send_command",{entity_id:this.entity_id,command:"load_multi_map",params:{map_flag:e}})}state(e){return this.hass.states[e].state}getAttributeValue(e,t){return e.attributes[t]}getExistingEntityId(e){for(let t of e)if(this.hass.states[t])return t}}function it(e,t,o){const i={quiet:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.112"><path fill="none" stroke="${o}" stroke-width=".529" d="M5.795.8a4.736 4.736 0 1 0 0 9.472 4.736 4.736 0 0 0 4.352-2.874A4.2 4.2 0 0 1 5.61 3.212a4.2 4.2 0 0 1 .742-2.38C6.16.81 5.961.806 5.795.8z"/></svg>`,balanced:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><path d="M55.986 146.233c1.059-.033 3.044.908 3.017 2.947-.024 1.88-1.601 3.05-2.858 3.1" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-49.835 -142.332)"/><path d="M56.6 148.146c-.501.933-2.309 2.181-4.061 1.139-1.616-.961-1.842-2.913-1.256-4.026" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-49.835 -142.332)"/><path d="M54.637 147.601c-.558-.9-.736-3.09 1.043-4.086 1.64-.918 3.443-.138 4.115.925" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-49.835 -142.332)"/></svg>`,turbo:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><path d="M104.403 145.24c.567-.459 1.067-.907 2.232-.951 1.249-.075 3.1.66 3.027 2.745M107.79 147.041c.459.567.907 1.068.951 2.233.075 1.248-.66 3.1-2.745 3.026M105.768 150.438c-.567.458-1.067.906-2.232.95-1.249.075-3.1-.66-3.026-2.744M102.421 148.614c-.458-.567-.906-1.067-.95-2.232-.075-1.249.66-3.1 2.744-3.026" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-99.576 -142.332)"/></svg>`,max:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><path d="M153.113 145.3s.695-2.03 2.828-2.125c.876-.039 1.43.29 1.43.29M156.884 144.916s2.14.147 2.784 2.182c.265.836.09 1.456.09 1.456M158.276 148.682s.413 2.106-1.386 3.254c-.74.472-1.384.464-1.384.464M154.977 151.075s-1.927.944-3.502-.497c-.647-.592-.807-1.216-.807-1.216M152.18 148.833s-1.615-1.412-.896-3.422c.295-.825.809-1.214.809-1.214" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(-149.743 -142.332)"/></svg>`,max_plus:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.112 11.113"><g transform="translate(-199.626 -142.332)"><path d="M202.912 151.038c.006.58.989 1.032 2.208 1.032 1.22 0 2.208-.44 2.208-1.032M201.616 148.172a.615.615 0 0 0-.104.328c0 .769 1.615 1.392 3.608 1.392s3.608-.623 3.608-1.392a.62.62 0 0 0-.102-.328" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1"/><ellipse cx="205.12" cy="145.325" rx="4.701" ry="1.9" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1"/><path d="M204.964 144.828c1.462-.03 3.075.222 3.087 1.029.01.655-.735 1.052-1.308 1.25" style="fill:none;fill-opacity:1;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:2.5;stroke-dasharray:none;stroke-opacity:1"/></g></svg>`};return i[e]?i[e]:D}function rt(e,t,o){const i={mild:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><path d="M-110.765 136.054a3.324 3.324 0 0 1-6.647 0c0-1.835 1.704-3.847 3.323-4.712 1.659.786 3.324 2.877 3.324 4.712z" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(119.628 -130.73)"/><path d="M-117.329 136.799s.713.779 1.977.779c1.263 0 2.342-.817 2.679-.893.074-.033 1.859-.06 1.859-.06v0M-119.023 134.819s-.152.953-.14 1.659c.012.744.163 1.405.373 1.919M-109.154 134.819s.152.953.14 1.659a5.365 5.365 0 0 1-.374 1.919" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(119.628 -130.73)"/></svg>`,moderate:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><path d="M-137.966 136.055a3.324 3.324 0 0 1-6.647 0c0-1.836 1.705-3.847 3.323-4.713 1.659.787 3.324 2.877 3.324 4.713z" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(146.896 -130.73)"/><path d="M-144.547 135.836s.713.78 1.976.78c1.264 0 2.343-.818 2.68-.894.074-.033 1.859-.059 1.859-.059v0M-146.294 134.813s-.152.954-.14 1.66c.012.743.164 1.404.374 1.918M-136.424 134.813s.152.954.14 1.66a5.365 5.365 0 0 1-.374 1.918M-143.17 140.934s.947.258 1.859.258 1.93-.363 1.93-.363" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(146.896 -130.73)"/></svg>`,intense:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><path d="M55.792 136.055a3.324 3.324 0 0 1-6.648 0c0-1.836 1.705-3.847 3.324-4.713 1.659.787 3.324 2.877 3.324 4.713z" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(-46.818 -130.73)"/><path d="M49.641 134.22s.349.56 1.612.56c1.264 0 2.342-.818 2.68-.893.074-.033 1.165-.06 1.165-.06M48.117 132.983c-.468.854-.69 1.52-.819 2.432M47.415 137.602c.234 1.356 1.079 2.163 1.465 2.584" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="translate(-46.818 -130.73)"/><path d="M48.117 132.983c-.468.854-.69 1.52-.819 2.432M47.415 137.602c.234 1.356 1.079 2.163 1.465 2.584" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5" transform="matrix(-1 0 0 1 57.873 -130.73)"/></svg>`};return i[e]?i[e]:D}function st(e,t,o){const i={fast:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-6.01 -117.589)"><rect width="8.996" height="9.525" x="7.069" y="118.383" ry="1.587" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M13.495 126.219v-1.637c0-.425-.651-1.417-1.929-1.427v0c-1.278-.01-1.93-1.001-1.93-1.426v-1.637" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`,standard:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-68.49 -117.589)"><rect width="8.996" height="9.525" x="69.548" y="118.383" ry="1.587" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M76.375 125.905v-4.437c0-.687-.52-1.24-1.165-1.24-.646 0-1.166.553-1.166 1.24v3.373c0 .687-.52 1.24-1.166 1.24-.646 0-1.166-.553-1.166-1.24v-4.437" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`,deep:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-130.888 -117.589)"><rect width="8.996" height="9.525" x="131.946" y="118.383" ry="1.587" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M133.972 125.852v-4.641c0-.581.369-1.05.827-1.05.459 0 .828.469.828 1.05v3.883c0 .581.402 1.05.86 1.05.459 0 .861-.469.861-1.05v-3.841c0-.582.37-1.05.828-1.05.458 0 .827.468.827 1.05v4.641" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`,deep_plus:L`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="${t}" height="${t}" viewBox="0 0 11.113 11.113"><g transform="translate(-9.236 -117.598)"><rect width="8.996" height="9.525" x="10.294" y="118.392" ry="1.587" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/><path d="M12.034 120.389V125.39c0 .421.3.76.673.76.372 0 .673-.339.673-.76V120.918c0-.421.322-.76.722-.76.4 0 .722.339.722.76V125.39c0 .421.3.76.673.76.372 0 .672-.339.672-.76V120.918c0-.421.3-.76.673-.76.373 0 .673.339.673.76V125.92" style="fill:none;stroke:${o};stroke-width:.529167;stroke-linecap:round;stroke-miterlimit:2.5"/></g></svg>`};return i[e]?i[e]:D}var nt=n`.popup-background{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.32);z-index:999}.popup-card{position:relative;color:var(--vc-primary-text-color);border-radius:16px;background-color:var(--card-background-color)}.popup-card .progress{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:9999}.popup-card .header{display:flex;align-items:center;padding:12px;height:var(--header-height)}.popup-card .header ha-icon{font-size:14px}.popup-card .header .text{flex:1;padding:10px 4px;font-size:22px;line-height:28px;font-weight:400}.popup-card .content{display:flex;padding:0 24px 8px 24px}.popup-card .parameters{min-height:380px;min-width:400px;padding:4px 16px 0}.popup-card .parameters .mode-title{display:flex;margin-bottom:4px}.popup-card .parameters .mode-title .value{margin-left:8px;text-transform:capitalize;color:var(--dark-primary-color)}.popup-card .parameters segment-button-group{margin-bottom:24px}.popup-card .areas{font-size:20px;font-weight:300}.popup-card .actions{display:flex;align-items:center;justify-content:center;padding:0 24px 24px 24px}.popup-card .actions .mwc-button{font-size:150%!important}.popup-card .actions .clean-button{display:inline-block;padding:10px 32px;border:none;border-radius:8px;color:var(--primary-text-color);background:var(--vc-primary-select-background);cursor:pointer}.popup-card .actions .clean-button.disabled{opacity:.3;cursor:default}@media (max-width:600px){.popup-card{width:100vw;max-height:100vh;border-radius:0;overflow-y:auto;overflow-x:hidden}.popup-card .header{padding:0 12px}.popup-card .content{flex-direction:column;overflow:auto}.popup-card .parameters{min-height:auto;min-width:0;min-width:initial;width:100%;max-width:100%;padding:0 0 8px 0;margin-bottom:4px;border-bottom:2px solid var(--divider-color)}.popup-card .parameters segment-button-group{margin-bottom:12px}.popup-card .areas{font-size:18px}.popup-card .actions{flex-wrap:wrap;justify-content:center}.popup-card .actions .clean-button{padding:8px 24px;width:100%;max-width:300px}}`;me(nt);var at=n`.multiselect-button{display:flex;line-height:24px;padding:8px 16px;margin-bottom:4px;cursor:pointer;border-radius:8px}.multiselect-button.active{background-color:var(--vc-primary-select-background)}.multiselect-button .text{margin-left:8px}`;me(at);let ct=class extends se{constructor(){super(...arguments),this.selection={}}static get styles(){return at}connectedCallback(){super.connectedCallback(),this.buttons.forEach((e=>this.selection[e.value]=!1))}render(){if(!this.buttons)return D;const e=this.buttons.map((({icon:e,text:t,value:o})=>{const i=this.selection[o]?"active":"";return L`<div class="multiselect-button ${i}" @click="${()=>this._onItemClick(o)}"><ha-icon icon="${e}"></ha-icon><div class="text">${t}</div></div>`}));return L`${e}`}_onItemClick(e){this.selection[e]=!this.selection[e],this.requestUpdate();const t=Object.entries(this.selection).filter((([e,t])=>t)).map((([e])=>e));this.dispatchEvent(new CustomEvent("select",{detail:t}))}};e([de()],ct.prototype,"buttons",void 0),e([pe()],ct.prototype,"selection",void 0),ct=e([ae("multiselect-button-group")],ct);var lt=n`:host{display:flex;box-sizing:border-box;border:1px solid var(--vc-primary-select-background);border-radius:18px;overflow:hidden}.segment-button{display:flex;flex:1;align-items:center;justify-content:center;padding:8px 24px;cursor:pointer}.segment-button.active{background-color:var(--vc-primary-select-background)}.segment-button.disabled{display:none;opacity:.2;cursor:default}.segment-button img{height:24px;width:24px}.segment-button .text{white-space:nowrap}`;me(lt);let dt=class extends se{static get styles(){return lt}render(){if(!this.buttons)return D;const e=this.buttons.map((({icon:e,text:t,value:o,disabled:i})=>{const r=this.active==o?"active":"",s=e?L`${e}`:D,n=t?L`<div class="text">${t}</div>`:D;return L`<div class="segment-button ${r} ${i?"disabled":""}" @click="${()=>this._onItemClick(o,i)}">${s}${n}</div>`}));return L`${e}`}_onItemClick(e,t){this.active===e||t||(this.active=e,this.dispatchEvent(new CustomEvent("select",{detail:e})))}};e([de()],dt.prototype,"buttons",void 0),e([de()],dt.prototype,"active",void 0),dt=e([ae("segment-button-group")],dt);var pt=n`:host{cursor:pointer}.content{display:flex;align-items:center;justify-content:center;height:42px;width:40px;border-radius:8px;background-color:var(--vc-primary-select-background)}`;me(pt);let ht=class extends se{constructor(){super(...arguments),this.color="#000"}static get styles(){return pt}connectedCallback(){super.connectedCallback(),this.active||(this.active="1")}render(){const e=function(e,t,o){const i={1:L`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 42 42"><path fill="${o}" stroke-linecap="round" stroke-miterlimit="2.5" stroke-width=".01" d="M26.869 7.185a.981.981 0 0 0-.592.176l-5.344 3.55c-.34.193-.511.46-.511.801 0 .256.095.49.287.703.213.214.447.32.703.32a.893.893 0 0 0 .545-.19L25.86 9.93v18.71c0 .255.095.479.287.671s.438.287.737.287.544-.095.736-.287.287-.416.287-.672V8.16a.932.932 0 0 0-.223-.639c-.149-.192-.363-.299-.64-.32a.898.898 0 0 0-.176-.016zm-10.285 5.848a.96.96 0 0 0-.705.287l-4.18 4.152-3.947-4.056a.914.914 0 0 0-.705-.32.788.788 0 0 0-.608.288.87.87 0 0 0-.255.64c0 .236.085.46.255.673l3.96 4.068-4.215 4.188c-.192.192-.287.416-.287.672s.095.48.287.671c.192.192.406.288.64.288.256 0 .49-.107.703-.32l4.188-4.147 4.068 4.18c.235.191.459.287.672.287.192 0 .396-.074.61-.223.213-.15.32-.385.32-.705 0-.256-.107-.48-.32-.672l-4.045-4.156 4.205-4.164c.192-.235.287-.469.287-.704 0-.234-.095-.448-.287-.64a.821.821 0 0 0-.64-.287z" aria-label="×1" style="shape-inside:url(#rect1578);white-space:pre" transform="translate(.992 2.608)"/></svg>`,2:L`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 42 42"><g style="shape-inside:url(#rect1578);white-space:pre"><path fill="${o}" stroke-linecap="round" stroke-miterlimit="2.5" stroke-width=".01" d="M27.272 7.033c-.81 0-1.643.17-2.496.511a8.308 8.308 0 0 0-2.272 1.313c-.682.554-1.215 1.16-1.6 1.822a4.47 4.47 0 0 0-.35.514c-.065.15-.098.298-.098.447 0 .235.097.437.289.607.192.15.416.225.672.225.17 0 .319-.043.447-.129.15-.085.288-.234.416-.447a5.01 5.01 0 0 1 1.152-1.535 6.58 6.58 0 0 1 1.729-1.088 5.097 5.097 0 0 1 1.984-.416c1.45 0 2.602.426 3.455 1.28.853.852 1.28 1.984 1.28 3.392 0 .853-.298 1.824-.895 2.912-.576 1.066-1.452 2.24-2.625 3.52l-7.39 8.16c-.171.213-.259.437-.259.671 0 .32.098.566.29.737.213.149.459.222.736.222h12a.865.865 0 0 0 .639-.255.857.857 0 0 0 .289-.672.82.82 0 0 0-.29-.639.82.82 0 0 0-.638-.29h-9.834l5.898-6.622c1.366-1.515 2.388-2.923 3.07-4.225.705-1.322 1.057-2.539 1.057-3.648 0-1.301-.277-2.42-.832-3.36a5.362 5.362 0 0 0-2.305-2.209c-.98-.533-2.154-.798-3.52-.798zm-10.688 6a.96.96 0 0 0-.705.287l-4.18 4.152-3.947-4.057a.914.914 0 0 0-.705-.32.788.788 0 0 0-.608.29.87.87 0 0 0-.255.64c0 .234.085.458.255.672l3.96 4.068-4.215 4.188c-.192.192-.287.415-.287.671s.095.48.287.672c.192.192.406.287.64.287.256 0 .49-.107.703-.32l4.188-4.146 4.068 4.18c.235.191.459.286.672.286.192 0 .396-.073.61-.222.213-.15.32-.385.32-.705 0-.256-.107-.48-.32-.672l-4.045-4.156 4.205-4.164c.192-.235.287-.469.287-.704 0-.234-.095-.448-.287-.64a.821.821 0 0 0-.64-.287z" style="white-space:pre" transform="translate(.992 2.608)"/></g></svg>`,3:L`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${t}" viewBox="0 0 42 42"><g style="shape-inside:url(#rect1578);white-space:pre"><path fill="${o}" stroke-linecap="round" stroke-miterlimit="2.5" stroke-width=".01" d="M6.824 24.584c-.235 0-.448-.096-.64-.288s-.288-.416-.288-.672.096-.48.288-.672l9.696-9.632a.958.958 0 0 1 .704-.288.82.82 0 0 1 .64.288c.192.192.288.405.288.64s-.096.47-.288.704l-9.696 9.6c-.213.213-.448.32-.704.32zm8.96-.288-9.344-9.6a1.061 1.061 0 0 1-.256-.672c0-.256.085-.47.256-.64a.788.788 0 0 1 .608-.288c.277 0 .512.107.704.32l9.312 9.568c.213.192.32.416.32.672 0 .32-.107.555-.32.704s-.416.224-.608.224c-.213 0-.437-.096-.672-.288zm6.024 1.76c.107 0 .213.021.32.064.128.043.277.139.448.288.448.47.981.832 1.6 1.088.619.235 1.323.352 2.112.352 1.045 0 1.995-.235 2.848-.704a5.387 5.387 0 0 0 2.08-1.952c.512-.853.768-1.824.768-2.912 0-1.237-.277-2.23-.832-2.976a4.747 4.747 0 0 0-2.08-1.696 6.048 6.048 0 0 0-2.56-.576c-.235 0-.47.021-.704.064-.213.021-.416.053-.608.096s-.341.064-.448.064c-.277 0-.49-.085-.64-.256a1.112 1.112 0 0 1-.224-.704c0-.15.032-.277.096-.384.064-.128.15-.267.256-.416l6.496-7.072.384.512h-9.696a.98.98 0 0 1-.672-.256c-.17-.192-.256-.416-.256-.672s.085-.47.256-.64a.98.98 0 0 1 .672-.256h10.752c.363 0 .619.117.768.352.15.213.224.427.224.64a.852.852 0 0 1-.096.384c-.064.107-.15.224-.256.352l-6.496 7.072-.704-.416c.064-.064.277-.128.64-.192.384-.085.683-.128.896-.128 1.173 0 2.272.277 3.296.832a6.498 6.498 0 0 1 2.528 2.4c.661 1.024.992 2.293.992 3.808 0 1.493-.352 2.805-1.056 3.936a7.262 7.262 0 0 1-2.848 2.592c-1.195.619-2.517.928-3.968.928-.875 0-1.739-.15-2.592-.448a6.285 6.285 0 0 1-2.24-1.344c-.15-.128-.256-.256-.32-.384s-.096-.256-.096-.384c0-.256.085-.49.256-.704.192-.235.427-.352.704-.352z" style="white-space:pre" transform="translate(.992 2.608)"/></g></svg>`};return i[e]?i[e]:D}(this.active,24,this.color);return L`<div class="content" @click="${this._onItemClick}">${e}</div>`}_onItemClick(){let e=parseInt(this.active,10);e+=1,e>3&&(e=1),this.active=e.toString(),this.dispatchEvent(new CustomEvent("select",{detail:e}))}};e([de()],ht.prototype,"active",void 0),e([de()],ht.prototype,"color",void 0),ht=e([ae("cycles-button")],ht);let ut=class extends se{constructor(){super(...arguments),this.areas=[],this.iconColor="#000",this.popupRequestInProgress=!1,this.activeCleaningMode=Ye.VacAndMop,this.activeSuctionMode=Xe.Turbo,this.activeMopMode=et.Moderate,this.activeRouteMode=tt.Standard,this.activeCycleMode="1",this.activeAreas=[],this.cleaningModes=[],this.suctionModes=[],this.mopModes=[],this.routeModes=[]}static get styles(){return nt}connectedCallback(){super.connectedCallback(),this.cleaningModes=[{text:Je("mode.vac&mop"),value:Ye.VacAndMop},{text:Je("mode.mop"),value:Ye.Mop},{text:Je("mode.vac"),value:Ye.Vac}],this.activeSuctionMode=this.robot.getSuctionMode(),this.activeMopMode=this.robot.getMopMode(),this.activeRouteMode=this.robot.getRouteMode(),this.activeSuctionMode==Xe.Off?this.activeCleaningMode=Ye.Mop:this.activeMopMode==et.Off?this.activeCleaningMode=Ye.Vac:this.activeCleaningMode=Ye.VacAndMop}onCleaningModeChange(e){const t=e.detail;this.activeCleaningMode=t,this.fixModesIfNeeded()}onSuctionModeChange(e){this.activeSuctionMode=e.detail}onMoppingModeChange(e){this.activeMopMode=e.detail}onRouteModeChange(e){this.activeRouteMode=e.detail}onCycleModeChange(e){this.activeCycleMode=e.detail}onAreasChange(e){this.activeAreas=e.detail,this.requestUpdate()}async onRunCleaning(){if(0==this.activeAreas.length)return;this.popupRequestInProgress=!0,this.fixModesIfNeeded(),await this.robot.setSuctionModeAsync(this.activeSuctionMode),await new Promise((e=>setTimeout(e,100))),await this.robot.setMopModeAsync(this.activeMopMode),await new Promise((e=>setTimeout(e,100))),await this.robot.setRouteModeAsync(this.activeRouteMode),await new Promise((e=>setTimeout(e,100)));const e=this.activeAreas.map((e=>parseInt(e,10)));await this.robot.startSegmentsCleaningAsync(e,parseInt(this.activeCycleMode,10)),this.closePopup(),this.popupRequestInProgress=!1}onPopupClose(e){e.stopPropagation(),this.closePopup()}onPopupBackgroundClick(e){const t=e.target;t&&t.classList.contains("popup-background")&&this.closePopup()}closePopup(){this.activeAreas=[],this.dispatchEvent(new CustomEvent("close"))}render(){const e=this.renderSuctionMode(),t=this.renderMoppingMode(),o=this.renderRouteMode(),i=this.renderAreas(),r=this.renderProgress();return L`<div class="popup-background" @click="${this.onPopupBackgroundClick}"><div class="popup-card"><div class="header"><ha-icon-button icon="mdi:close" @click="${this.onPopupClose}"><ha-icon icon="mdi:close"></ha-icon></ha-icon-button><div class="text">${Je("common.custom_cleaning")}</div></div><div class="content"><div class="parameters"><segment-button-group buttons="${this.cleaningModes}" active="${this.activeCleaningMode}" @select="${this.onCleaningModeChange}"></segment-button-group>${e} ${t} ${o}<cycles-button active="${this.activeCycleMode}" color="${this.iconColor}" @select="${this.onCycleModeChange}"></cycles-button></div>${i}</div><div class="actions"><button class="clean-button ${0==this.activeAreas.length?"disabled":""}" @click="${this.onRunCleaning}">CLEAN</button></div>${r}</div></div>`}renderProgress(){return this.popupRequestInProgress?L`<div class="progress"><ha-circular-progress indeterminate="true" size="large"></ha-circular-progress></div>`:D}renderSuctionMode(){if(this.activeCleaningMode==Ye.Mop)return D;this.suctionModes=Object.values(Xe).map((e=>({icon:it(e,24,this.iconColor),value:e,disabled:!this.isSupportedSuctionMode(e,this.activeCleaningMode)})));const e=Je(`suction_mode.${this.activeSuctionMode}`);return L`<div class="mode-title"><div class="title">${Je("common.suction_mode")}</div><div class="value">${e}</div></div><segment-button-group buttons="${this.suctionModes}" active="${this.activeSuctionMode}" @select="${this.onSuctionModeChange}"></segment-button-group>`}renderMoppingMode(){if(this.activeCleaningMode==Ye.Vac)return D;this.mopModes=Object.values(et).map((e=>({icon:rt(e,24,this.iconColor),value:e,disabled:!this.isSupportedMopMode(e,this.activeCleaningMode)})));const e=Je(`mop_mode.${this.activeMopMode}`);return L`<div class="mode-title"><div class="title">${Je("common.mop_mode")}</div><div class="value">${e}</div></div><segment-button-group buttons="${this.mopModes}" active="${this.activeMopMode}" @select="${this.onMoppingModeChange}"></segment-button-group>`}renderRouteMode(){this.routeModes=Object.values(tt).map((e=>({icon:st(e,24,this.iconColor),value:e,disabled:!this.isSupportedRouteMode(e,this.activeCleaningMode)})));const e=Je(`route_mode.${this.activeRouteMode}`);return L`<div class="mode-title"><div class="title">${Je("common.route_mode")}</div><div class="value">${e}</div></div><segment-button-group buttons="${this.routeModes}" active="${this.activeRouteMode}" @select="${this.onRouteModeChange}"></segment-button-group>`}renderAreas(){const e=this.areas.map((e=>({icon:e.icon,text:e.name,value:e.roborock_area_id.toString()})));return L`<div class="areas"><multiselect-button-group buttons="${e}" @select="${this.onAreasChange}"></multiselect-button-group></div>`}fixModesIfNeeded(){ot.isSupportedSuctionMode(this.activeSuctionMode,this.activeCleaningMode)||(this.activeSuctionMode=this.activeCleaningMode==Ye.Mop?Xe.Off:Xe.Turbo),ot.isSupportedMopMode(this.activeMopMode,this.activeCleaningMode)||(this.activeMopMode=this.activeCleaningMode==Ye.Vac?et.Off:et.Moderate),ot.isSupportedRouteMode(this.activeRouteMode,this.activeCleaningMode)||(this.activeRouteMode=tt.Standard)}isSupportedSuctionMode(e,t){return e!=Xe.Off&&ot.isSupportedSuctionMode(e,t)}isSupportedMopMode(e,t){return e!=et.Off&&ot.isSupportedMopMode(e,t)}isSupportedRouteMode(e,t){return ot.isSupportedRouteMode(e,t)}};e([de()],ut.prototype,"robot",void 0),e([de()],ut.prototype,"areas",void 0),e([de()],ut.prototype,"iconColor",void 0),e([pe()],ut.prototype,"popupRequestInProgress",void 0),e([pe()],ut.prototype,"activeCleaningMode",void 0),e([pe()],ut.prototype,"activeSuctionMode",void 0),e([pe()],ut.prototype,"activeMopMode",void 0),e([pe()],ut.prototype,"activeRouteMode",void 0),e([pe()],ut.prototype,"activeCycleMode",void 0),ut=e([ae("custom-cleaning-popup")],ut);let mt=class extends se{constructor(){super(...arguments),this.maps=[],this.currentMapFlag=0}static get styles(){return n`.popup-background{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.32);z-index:999}.popup-card{position:relative;color:var(--primary-text-color);border-radius:16px;background-color:var(--card-background-color);min-width:300px;max-width:400px;box-shadow:var(--ha-card-box-shadow,0 2px 4px rgba(0,0,0,.15))}.header{display:flex;align-items:center;padding:12px;border-bottom:1px solid var(--divider-color)}.text{flex:1;text-align:center;font-weight:500;font-size:1.1em;color:var(--primary-text-color)}.content{padding:16px}.map-options{display:flex;flex-direction:column;gap:12px}.map-option{display:flex;align-items:center;padding:12px 16px;background:var(--card-background-color);border:1px solid var(--divider-color);border-radius:8px;cursor:pointer;transition:all .2s ease;color:var(--primary-text-color);font-size:1em}.map-option:hover{background:var(--primary-color);color:var(--text-primary-color);border-color:var(--primary-color)}.map-option.active{background:var(--primary-color);color:var(--text-primary-color);border-color:var(--primary-color);font-weight:500}.map-option ha-icon{margin-right:12px;width:20px;height:20px}.map-option span{flex:1}.check-icon{margin-left:8px;margin-right:0;width:16px;height:16px}`}onMapSelect(e){this.dispatchEvent(new CustomEvent("map-select",{detail:e,bubbles:!0,composed:!0})),this.onClose()}onClose(){this.dispatchEvent(new CustomEvent("close",{bubbles:!0,composed:!0}))}onPopupBackgroundClick(e){const t=e.target;t&&t.classList.contains("popup-background")&&this.onClose()}render(){if(this.maps.length<=1)return D;const e=this.maps.map((e=>{const t=e.flag===this.currentMapFlag;return L`<button class="map-option ${t?"active":""}" @click="${()=>this.onMapSelect(e.flag)}"><ha-icon icon="mdi:map"></ha-icon><span>${e.name}</span> ${t?L`<ha-icon icon="mdi:check" class="check-icon"></ha-icon>`:""}</button>`}));return L`<div class="popup-background" @click="${this.onPopupBackgroundClick}"><div class="popup-card"><div class="header"><ha-icon-button icon="mdi:close" @click="${this.onClose}"><ha-icon icon="mdi:close"></ha-icon></ha-icon-button><div class="text">${Je("common.select_map")||"Select Map"}</div></div><div class="content"><div class="map-options">${e}</div></div></div></div>`}};e([de()],mt.prototype,"maps",void 0),e([de()],mt.prototype,"currentMapFlag",void 0),mt=e([ae("map-selection-popup")],mt);console.info("%c ROBOROCK-VACUUM-CARD %c 1.3.3-techmhe","color: white; background: black; font-weight: 700;","color: black; background: white; font-weight: 700;");let gt=class extends se{get name(){return this.config.entity.replace("vacuum.","")}get sensor(){const e=this.name;return{cleaning:this._getExistingSensorId([`binary_sensor.${e}_cleaning`,`binary_sensor.${e}_reinigen`]),mopDrying:this._getExistingSensorId([`binary_sensor.${e}_mop_drying`,`binary_sensor.${e}_mopp_trocknen`]),mopDryingRemainingTime:this._getExistingSensorId([`sensor.${e}_mop_drying_remaining_time`,`sensor.${e}_mopp_trocknen_verbleibende_zeit`]),battery:this._getExistingSensorId([`sensor.${e}_battery`,`sensor.${e}_batterie`])}}static get styles(){return ge}constructor(){super(),this.popupActive=!1,this.mapSelectionPopupActive=!1,this.iconColor="#000",this.robot=new ot}setConfig(e){this.config=function(e){var t,o,i;if(!e)throw new Error(Je("error.invalid_config"));if(!e.entity)throw new Error(Je("error.missing_entity"));const r={[Ye.VacAndMop]:{suction:Xe.Balanced,mop:et.Moderate,route:tt.Standard},[Ye.Mop]:{suction:Xe.Balanced,mop:et.Moderate,route:tt.Deep},[Ye.Vac]:{suction:Xe.Turbo,mop:et.Moderate,route:tt.Standard}};return{entity:e.entity,stats:null!==(t=e.stats)&&void 0!==t?t:{},areas:null!==(o=e.areas)&&void 0!==o?o:[],maps:null!==(i=e.maps)&&void 0!==i?i:[],default_mode:Ye.VacAndMop,default_modes:Object.assign(Object.assign({},e.default_modes),r)}}(e),this.robot.setEntity(this.config.entity)}getCardSize(){return 3}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}onPopupShow(e){e.stopPropagation(),this.popupActive=!0}onPopupClose(e){e.stopPropagation(),this.popupActive=!1}onMapSelectionPopupClose(e){e.stopPropagation(),this.mapSelectionPopupActive=!1}render(){if(!this.hass||!this.config)return D;this.iconColor=getComputedStyle(document.documentElement).getPropertyValue("--state-icon-color").trim(),this.robot.setHass(this.hass);const e=!!this.sensor.cleaning&&"on"==this.state(this.sensor.cleaning),t=this.state(this.config.entity),o=this.renderState(t),i=this.renderErrors(),r=this.renderName(),s=this.renderMode(),n=this.renderMopDrying(),a=this.renderBattery(),c=this.renderStats(e?"cleaning":t),l=this.renderActions(e,t),d=this.renderMapSwitcher(),p=this.renderPopup(),h=this.renderMapSelectionPopup();return L`<ha-card><div class="header">${r} ${s} ${n} ${a}</div><div class="content" @click="${this.onPopupShow}">${i}<div class="state">${o}</div></div>${c}<div class="actions">${l} ${d}</div></ha-card>${p} ${h}`}renderState(e){const t=this._getExistingSensorId([`sensor.${this.name}_status`]);if(!t)return Je(`status.${e}`);const o=this.state(t);return e==o?Je(`status.${e}`):Je(`status.${e}`)+". "+Je(`reach_status.${o}`)+"."}renderPopup(){if(!this.hass||!this.config||!this.config.areas&&!this.config.maps||!this.popupActive)return D;const e=this.getAreas();return L`<custom-cleaning-popup robot="${this.robot}" areas="${e}" iconColor="${this.iconColor}" @close="${this.onPopupClose}"></custom-cleaning-popup>`}renderMapSelectionPopup(){if(!this.hass||!this.config||!this.mapSelectionPopupActive)return D;const e=this.getVacuumMaps();if(e.length<=1)return D;const t=this.getCurrentMapFlag();return L`<map-selection-popup .maps="${e}" .currentMapFlag="${t}" @close="${this.onMapSelectionPopupClose}" @map-select="${this.onMapSelect}"></map-selection-popup>`}renderErrors(){if(!this.hass||!this.config)return D;const e=this._getExistingSensorId([`sensor.${this.name}_vacuum_error`,`sensor.${this.name}_current_error`,`sensor.${this.name}_staubsauger_fehler`]),t=this._getExistingSensorId([`sensor.${this.name}_dock_error`,`sensor.${this.name}_station_fehler`]);let o=!1,i=D;if(e){const t=this.state(e),r=`vacuum_error.${t}`;o="none"!=t,o&&(i=L`<div>${Je("common.vacuum_error")}: ${Je(r)}.</div>`)}let r=!1,s=D;if(t){const e=this.state(t),o=`doc_error.${e}`;r="ok"!=e,r&&(s=L`<div>${Je("common.doc_error")}: ${Je(o)}.</div>`)}return o||r?L`<div class="errors">${i} ${s}</div>`:D}renderStats(e){if(void 0===e)return D;const t=(this.config.stats[e]||this.config.stats.default||[]).map((({entity:e,attribute:t,scale:o,divide_by:i,unit:r,title:s})=>{if(!e&&!t)return D;let n;if(e&&t)n=this.getAttributeValue(this.hass.states[e],t);else if(t)n=this.getAttributeValue(this.hass.states[this.config.entity],t);else{if(!e)return D;n=this.state(e)}if(void 0===n)n="N/A";else{if(null!=o||null!=i){let e=parseFloat(n);null!=i&&i>0&&(e/=i),n=null!=o?e.toFixed(o):e.toString()}}return L`<div class="stats-block" @click="${()=>this.handleMore(e)}"><span class="stats-value">${n}</span> ${r}<div class="stats-subtitle">${s}</div></div>`}));return t.length?L`<div class="stats">${t}</div>`:D}renderActions(e,t){if(e){const e="paused"==t?L`<paper-button @click="${this.handleVacuumAction("start")}"><ha-icon icon="hass:play"></ha-icon>${Je("common.resume")}</paper-button>`:L`<paper-button @click="${this.handleVacuumAction("pause")}"><ha-icon icon="hass:pause"></ha-icon>${Je("common.pause")}</paper-button>`;return L`${e}<paper-button @click="${this.handleVacuumAction("stop")}"><ha-icon icon="hass:stop"></ha-icon>${Je("common.stop")}</paper-button><paper-button @click="${this.handleVacuumAction("return_to_base")}"><ha-icon icon="hass:home-map-marker"></ha-icon>${Je("common.return_to_base")}</paper-button>`}return L`<paper-button @click="${this.handleVacuumAction("start")}"><ha-icon icon="hass:play"></ha-icon>${Je("common.start")}</paper-button><paper-button @click="${this.handleVacuumAction("locate")}"><ha-icon icon="mdi:map-marker"></ha-icon>${Je("common.locate")}</paper-button>`}renderName(){const e=this.hass.states[this.config.entity],t=this.getAttributeValue(e,"friendly_name"),o=this.getAttributeValue(e,"icon");return L`<div class="tip" @click="${()=>this.handleMore(this.config.entity)}"><ha-icon icon="${o}"></ha-icon><span class="icon-title">${t}</span></div>`}renderMode(){const e=[],t=this.robot.getSuctionMode(),o=this.robot.getMopMode(),i=this.robot.getRouteMode();t!=Xe.Off&&e.push(it(t,24,this.iconColor)),o!=et.Off&&e.push(rt(o,24,this.iconColor)),e.push(st(i,24,this.iconColor));const r=e.map((e=>L`<div class="tip">${e}</div>`));return L`<div class="modes" @click="${this.onPopupShow}">${r}</div>`}renderMopDrying(){if(!this.sensor.mopDrying)return D;const e=this.hass.states[this.sensor.mopDrying];if(!e)return D;if("on"!=e.state)return D;if(!this.sensor.mopDryingRemainingTime)return L`<div class="tip"><ha-icon icon="mdi:heat-wave"></ha-icon><span class="icon-title">Drying</span></div>`;const t=this.hass.states[this.sensor.mopDryingRemainingTime];if(!t)return L`<div class="tip"><ha-icon icon="mdi:heat-wave"></ha-icon><span class="icon-title">Drying</span></div>`;const o=Number(t.state);return L`<div class="tip" @click="${()=>this.handleMore(this.sensor.mopDryingRemainingTime)}"><ha-icon icon="mdi:heat-wave"></ha-icon><span class="icon-title">${function(e){if(0===e)return"0s";const t=Math.floor(e/3600),o=Math.floor(e%3600/60);return(t>0?`${t}h `:"")+(o>0?`${o}min`:"").trim()}(o)}</span></div>`}renderBattery(){if(!this.sensor.battery)return L``;const e=this.hass.states[this.sensor.battery];if(!e)return L``;const t=Number(e.state),o=Number.isFinite(t)?Math.round(t):e.state,i=e.attributes.unit_of_measurement||(Number.isFinite(t)?"%":"");return L`<div class="tip" @click="${()=>this.handleMore(this.sensor.battery)}"><state-badge class="battery-badge" .hass="${this.hass}" .stateObj="${e}"></state-badge><span class="icon-title">${o}${i}</span></div>`}handleVacuumAction(e){return()=>this.robot.callServiceAsync(e)}handleMore(e){!function(e,t,o,i){i=i||{},o=null==o?{}:o;var r=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});r.detail=o,e.dispatchEvent(r)}(this,"hass-more-info",{entityId:e},{bubbles:!1,composed:!0})}initializeCurrentMap(){}getCurrentMapFlag(){if(this.config.map_select_entity){const e=this.hass.states[this.config.map_select_entity];if(e&&e.state){const t=e.state,o=this.getVacuumMaps(),i=o.find((e=>e.name===t));if(i)return console.debug("Current map found:",t,"flag:",i.flag),i.flag;console.debug("No map found for name:",t,"available maps:",o.map((e=>e.name)))}else console.debug("No select entity state found for:",this.config.map_select_entity)}const e=this.getVacuumMaps(),t=e.length>0?e[0].flag:0;return console.debug("Using fallback map flag:",t),t}renderMapSwitcher(){const e=this.getVacuumMaps();if(!this.config.maps||0===this.config.maps.length||e.length<=1)return D;const t=this.getCurrentMapFlag(),o=e.find((e=>e.flag===t)),i=o?o.name:`Map ${t}`;return L`<div class="map-switcher" @click="${this.onMapSwitcherClick}"><ha-icon icon="mdi:map"></ha-icon><span>${i}</span></div>`}onMapSwitcherClick(e){e.stopPropagation();this.getVacuumMaps().length<=1||(this.mapSelectionPopupActive=!0)}async onMapSelect(e){const t=e.detail,o=this.getVacuumMaps().find((e=>e.flag===t));if(o)try{await this.robot.loadMultiMapAsync(t),this.config.map_select_entity&&await this.hass.callService("select","select_option",{entity_id:this.config.map_select_entity,option:o.name})}catch(e){console.error("Failed to switch map:",e)}}getVacuumMaps(){if(!this.config.maps||0===this.config.maps.length)return[];const e={};for(const t of this.config.maps){const{map_flag:o,map_name:i,room_id:r,room_name:s}=t;e[o]||(e[o]={flag:o,name:i,rooms:{}}),e[o].rooms[r]=s}const t=Object.values(e);return console.debug("Built maps from config:",t),t}getCurrentMap(){const e=this.getVacuumMaps(),t=this.getCurrentMapFlag();return e.find((e=>e.flag===t))}getAreas(){const e=[];if(this.config.maps&&this.config.maps.length>0){const t=this.getCurrentMap();if(!t)return e;if(!t.rooms||0===Object.keys(t.rooms).length)return e.push({icon:void 0,name:t.name,area_id:`map_${t.flag}`,roborock_area_id:t.flag,room_id:void 0,map_flag:t.flag}),e;const o=this.getCurrentMapFlag();for(const{map_flag:t,room_id:i,room_name:r}of this.config.maps)t===o&&e.push({icon:void 0,name:r,area_id:`map_${t}_room_${i}`,roborock_area_id:parseInt(i),room_id:i,map_flag:t});return e}if(!this.config.areas)return e;for(let{area_id:t,roborock_area_id:o}of this.config.areas){t=t.replace(/ /g,"_").toLowerCase();const i=this.hass.areas[t];i&&e.push({icon:i.icon,name:i.name,area_id:t,roborock_area_id:o})}return e}_getExistingSensorId(e){for(let t of e)if(this.hass.states[t])return t}getAttributeValue(e,t){return e.attributes[t]}state(e){var t;return null===(t=this.hass.states[e])||void 0===t?void 0:t.state}};e([de({attribute:!1})],gt.prototype,"hass",void 0),e([pe()],gt.prototype,"config",void 0),e([pe()],gt.prototype,"popupActive",void 0),e([pe()],gt.prototype,"mapSelectionPopupActive",void 0),gt=e([ae("roborock-vacuum-card")],gt);export{gt as RoborockVacuumCard};
